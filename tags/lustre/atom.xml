<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:sy="http://purl.org/rss/1.0/modules/syndication/" xmlns:media="http://search.yahoo.com/mrss/"><channel><title>Lustre on 陈少文的网站</title><link>https://www.chenshaowen.com/tags/lustre/</link><description>Recent content in Lustre on 陈少文的网站</description><generator>Hugo -- gohugo.io</generator><language>zh</language><copyright>&amp;copy;2016 - {year}, All Rights Reserved.</copyright><lastBuildDate>Sat, 18 Jan 2025 01:00:00 +0000</lastBuildDate><sy:updatePeriod>weekly</sy:updatePeriod><atom:link href="https://www.chenshaowen.com/tags/lustre/atom.xml" rel="self" type="application/rss+xml"/><item><title>Fluid 下的 Juicefs 企业版维护</title><link>https://www.chenshaowen.com/blog/fluid-juicefs-enterprise-maintenance.html</link><pubDate>Sat, 18 Jan 2025 01:00:00 +0000</pubDate><atom:modified>Sat, 18 Jan 2025 01:00:00 +0000</atom:modified><guid>https://www.chenshaowen.com/blog/fluid-juicefs-enterprise-maintenance.html</guid><description>1. 设置环境变量 1 2 export NAMESPACE=xxx export PVC=xxx 2. Dataset 无法就绪 2.1 Fluid 组件问题 1 kubectl -n fluid-system get pod -o wide | grep -v &amp;#34;Running&amp;#34; 可能出现没有正常启动的情况。 2.2 有异常的 Dataset 异常的资源可能导致 Fluid 资源不断重启，需要人工介入删除。 2.3 检查 Worker \ Fuse 副本 worker 副本 1 kubectl -n ${NAMESPACE} get sts -l release=${PVC} 1 kubectl -n ${NAMESPACE} get pod -l release=${PVC},role=juicefs-worker fuse 副本 1 kubectl -n kas-job get ds -l</description><dc:creator>微信公众号</dc:creator><category>博文</category><category>Fluid</category><category>JuiceFS</category><category>AI</category><category>Data</category><category>Lustre</category></item><item><title>Fluid 使用 Lustre Runtime 以及性能测试</title><link>https://www.chenshaowen.com/blog/fluid-using-lustre-runtime-and-performance-testing.html</link><pubDate>Thu, 16 May 2024 00:00:00 +0000</pubDate><atom:modified>Thu, 16 May 2024 00:00:00 +0000</atom:modified><guid>https://www.chenshaowen.com/blog/fluid-using-lustre-runtime-and-performance-testing.html</guid><description>1. 分析 Fluid 挂载 NFS 存储 查看 Fuse Pod 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 kubectl get pod nfs-demo-fuse-f9wg8 -oyaml apiVersion: v1 kind: Pod metadata: generateName: nfs-demo-fuse- spec: containers: - command: - /usr/local/bin/entrypoint.sh env: - name: FLUID_RUNTIME_TYPE value: thin - name: FLUID_RUNTIME_NS value: default - name: FLUID_RUNTIME_NAME value: nfs-demo - name: MOUNT_POINT value: /runtime-mnt/thin/default/nfs-demo/thin-fuse - name: MOUNT_OPTIONS value: ro image: fluidcloudnative/nfs:v0.1 imagePullPolicy: IfNotPresent lifecycle: preStop: exec: command: - sh - -c - umount /runtime-mnt/thin/default/nfs-demo/thin-fuse name: thin-fuse securityContext: privileged: true volumeMounts:</description><dc:creator>微信公众号</dc:creator><category>博文</category><category>Fluid</category><category>JuiceFS</category><category>AI</category><category>Data</category><category>Lustre</category></item><item><title>Fluid 使用 Lustre Runtime 以及性能测试</title><link>https://www.chenshaowen.com/blog/fluid-using-lustre-runtime-and-performance-testing.html</link><pubDate>Thu, 16 May 2024 00:00:00 +0000</pubDate><atom:modified>Thu, 16 May 2024 00:00:00 +0000</atom:modified><guid>https://www.chenshaowen.com/blog/fluid-using-lustre-runtime-and-performance-testing.html</guid><description>1. 打包 Fluid Runtime 镜像 创建 fluid_config_init.py 脚本 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 #!/usr/bin/env python import json rawStr = &amp;#34;&amp;#34; with open(&amp;#34;/etc/fluid/config.json&amp;#34;, &amp;#34;r&amp;#34;) as f: rawStr = f.readlines() rawStr = rawStr[0] script = &amp;#34;&amp;#34;&amp;#34; #!/bin/sh set -ex MNT_FROM=$mountPoint MNT_TO=$targetPath trap &amp;#34;umount ${MNT_TO}&amp;#34; SIGTERM mkdir -p ${MNT_TO} mount -t lustre -o relatime,flock ${MNT_FROM} ${MNT_TO} sleep inf &amp;#34;&amp;#34;&amp;#34; obj = json.loads(rawStr) with open(&amp;#34;mount-lustre.sh&amp;#34;, &amp;#34;w&amp;#34;) as f: f.write(&amp;#39;mountPoint=&amp;#34;%s&amp;#34;\n&amp;#39; % obj[&amp;#34;mounts&amp;#34;][0][&amp;#34;mountPoint&amp;#34;]) f.write(&amp;#39;targetPath=&amp;#34;%s&amp;#34;\n&amp;#39; % obj[&amp;#34;targetPath&amp;#34;]) f.write(script) 只需调整一下 mount 命令即可。 创建启动脚本 entrypoint.sh 1 2 3</description><dc:creator>微信公众号</dc:creator><category>博文</category><category>Fluid</category><category>JuiceFS</category><category>AI</category><category>Data</category><category>Lustre</category></item></channel></rss>