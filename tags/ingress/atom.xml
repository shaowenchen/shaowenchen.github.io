<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:sy="http://purl.org/rss/1.0/modules/syndication/" xmlns:media="http://search.yahoo.com/mrss/"><channel><title>Ingress on 陈少文的网站</title><link>https://www.chenshaowen.com/tags/ingress/</link><description>Recent content in Ingress on 陈少文的网站</description><generator>Hugo -- gohugo.io</generator><language>zh</language><copyright>&amp;copy;2016 - {year}, All Rights Reserved.</copyright><lastBuildDate>Sun, 05 Feb 2023 00:00:00 +0000</lastBuildDate><sy:updatePeriod>weekly</sy:updatePeriod><atom:link href="https://www.chenshaowen.com/tags/ingress/atom.xml" rel="self" type="application/rss+xml"/><item><title>如何给 Kubernetes 服务添加 Basic 认证访问</title><link>https://www.chenshaowen.com/blog/how-to-add-basic-auth-to-kubernetes-service.html</link><pubDate>Sun, 05 Feb 2023 00:00:00 +0000</pubDate><atom:modified>Sun, 05 Feb 2023 00:00:00 +0000</atom:modified><guid>https://www.chenshaowen.com/blog/how-to-add-basic-auth-to-kubernetes-service.html</guid><description>1. 部署 Ingress Controller 查看 Kubernetes 版本 1 2 3 4 kubectl version --short Client Version: v1.21.4 Server Version: v1.21.4 查找兼容的 Nginx Ingress 版本 Helm Chart version Helm Chart 最高可用版本 K8s 适配版本 3.x.x 3.36.0 1.16+ 4.x.x 4.4.2 1.19+ 参考: https://github.com/kubernetes/ingress-nginx 安装 Nginx Ingress Controller 1 2 3 helm upgrade --install ingress-nginx ingress-nginx \ --repo https://kubernetes.github.io/ingress-nginx \ --namespace ingress-nginx --create-namespace --version v4.4.2 查看服务 1 2 3 4 5 6 7 8 9 10 11 12 kubectl -n ingress-nginx get svc NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE ingress-nginx-controller LoadBalancer 10.233.11.232 &amp;lt;pending&amp;gt; 80:30914/TCP,443:31493/TCP 14m ingress-nginx-controller-admission ClusterIP 10.233.56.67 &amp;lt;none&amp;gt; 443/TCP 14m kae@node1:~$</description><dc:creator>微信公众号</dc:creator><category>博文</category><category>Kubernetes</category><category>认证</category><category>Ingress</category></item><item><title>Kubernetes 签发 Ingress 证书及日常故障运维</title><link>https://www.chenshaowen.com/blog/kubernetes-ingress-certificates-and-ops.html</link><pubDate>Thu, 10 Oct 2019 00:00:00 +0000</pubDate><atom:modified>Thu, 10 Oct 2019 00:00:00 +0000</atom:modified><guid>https://www.chenshaowen.com/blog/kubernetes-ingress-certificates-and-ops.html</guid><description>1. 自动签发 Ingress 证书 安装 cert-manager 1 2 3 4 5 6 7 8 9 10 kubectl apply -f https://raw.githubusercontent.com/jetstack/cert-manager/release-0.10/deploy/manifests/00-crds.yaml kubectl create namespace cert-manager kubectl label namespace cert-manager certmanager.k8s.io/disable-validation=true helm repo add jetstack https://charts.jetstack.io helm repo update helm install \ --name cert-manager \ --namespace cert-manager \ --version v0.10.0 \ jetstack/cert-manager 创建一个全局的签发机构 新建文件 issuer.yaml 1 2 3 4 5 6 7 8 9 10 11 12 apiVersion: certmanager.k8s.io/v1alpha1 kind: ClusterIssuer metadata: name: letsencrypt-prod namespace: cert-manager spec: acme: server: https://acme-v02.api.letsencrypt.org/directory email: admin@domain.com privateKeySecretRef: name: letsencrypt-prod http01: {} 创建签发机构 1 kubectl apply -f issuer.yaml 签发证书 新建</description><dc:creator>微信公众号</dc:creator><category>博文</category><category>Kubernetes</category><category>证书</category><category>故障</category><category>Ingress</category></item><item><title>开发 Tips（15）</title><link>https://www.chenshaowen.com/blog/developing-tips-15.html</link><pubDate>Wed, 11 Sep 2019 00:00:00 +0000</pubDate><atom:modified>Wed, 11 Sep 2019 00:00:00 +0000</atom:modified><guid>https://www.chenshaowen.com/blog/developing-tips-15.html</guid><description>主要记录最近遇到的一些开发问题，解决方法。 1. Ingress 开启 HTTPS 准备好证书，domain.com.crt、domain.com.key 创建 Secret 1 kubectl create secret tls {SECRET_NAME} --key domain.com.key --cert domain.com.crt -n {NAMESPACE} 更新 Ingress 配置 1 2 3 4 5 spec: tls: - hosts: - domain.com secretName: {SECRET_NAME} 2. SSH 登陆失败，提示 ssh-dss SSH 登陆提示: 1 Unable to negotiate with 10.10.10.10 port 22: no matching</description><dc:creator>微信公众号</dc:creator><category>博文</category><category>Tips</category><category>Kubernetes</category><category>Ingress</category></item><item><title>使用 Helm 安装 harbor</title><link>https://www.chenshaowen.com/blog/install-harbor-using-helm.html</link><pubDate>Fri, 30 Aug 2019 00:00:00 +0000</pubDate><atom:modified>Fri, 30 Aug 2019 00:00:00 +0000</atom:modified><guid>https://www.chenshaowen.com/blog/install-harbor-using-helm.html</guid><description>前提准备，（1）已经安装 Helm ，参考 Helm 安装 ，（2）集群有默认的动态存储可用，参数 使用StorageClass提供PV动态存储 1. 使用 Helm 安装 Ingress Ingress 由 Ingress 和 Ingress Controller 两部分组成。 在 Kubernetes 中，Ingress 对象描述路由规则；Ingress Controller 通过与 Apiserver 交互，将 Ingress 规则写入</description><dc:creator>微信公众号</dc:creator><category>博文</category><category>Kubernetes</category><category>Harbor</category><category>Ingress</category><category>Helm</category><category>镜像仓库</category><category>镜像</category></item></channel></rss>