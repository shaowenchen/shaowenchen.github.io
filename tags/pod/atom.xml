<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:sy="http://purl.org/rss/1.0/modules/syndication/" xmlns:media="http://search.yahoo.com/mrss/"><channel><title>Pod on 陈少文的网站</title><link>https://www.chenshaowen.com/tags/pod/</link><description>Recent content in Pod on 陈少文的网站</description><generator>Hugo -- gohugo.io</generator><language>zh</language><copyright>&amp;copy;2016 - {year}, All Rights Reserved.</copyright><lastBuildDate>Sat, 22 Feb 2025 00:00:00 +0000</lastBuildDate><sy:updatePeriod>weekly</sy:updatePeriod><atom:link href="https://www.chenshaowen.com/tags/pod/atom.xml" rel="self" type="application/rss+xml"/><item><title>kubectl logs 无法查看 Pod 日志报错 NotFound</title><link>https://www.chenshaowen.com/blog/kubectl-logs-not-found-error.html</link><pubDate>Sat, 22 Feb 2025 00:00:00 +0000</pubDate><atom:modified>Sat, 22 Feb 2025 00:00:00 +0000</atom:modified><guid>https://www.chenshaowen.com/blog/kubectl-logs-not-found-error.html</guid><description>1. 现象 能查看 Pod 的信息 1 2 3 4 kubectl -n my-testns get pod my-testpod NAME READY STATUS RESTARTS AGE my-testpod 1/1 Running 0 2d13h 不能查看 Pod 的日志 1 2 3 kubectl -n my-testns logs my-testpod -f Error from server (NotFound): the server could not find the requested resource ( pods/log my-testpod) 在 Pod 所在主机上可以通过 docker logs 查看容器日志。 测试 Kubelet 的健康状态 OK 1 curl -k https://x.x.x.x:10250/healthz 这里要使用主机的 IP 地址，kubectl logs 命名会直接</description><dc:creator>微信公众号</dc:creator><category>博文</category><category>Kubernetes</category><category>kubectl</category><category>Pod</category><category>运维故障</category></item><item><title>使用 Calico 限制 Pod 的带宽</title><link>https://www.chenshaowen.com/blog/using-calico-to-limit-pod-bandwidth.html</link><pubDate>Wed, 12 Feb 2025 00:00:00 +0000</pubDate><atom:modified>Wed, 12 Feb 2025 00:00:00 +0000</atom:modified><guid>https://www.chenshaowen.com/blog/using-calico-to-limit-pod-bandwidth.html</guid><description>1. 测试全部带宽 在目标主机上启动 iperf3 服务端 1 2 3 4 5 iperf3 -s ----------------------------------------------------------- Server listening on 5201 ----------------------------------------------------------- 在客户端主机上测试 1 iperf3 -c x.x.x.x -p 5201 -t 10 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 Connecting to host x.x.x.x, port 5201 [ ID] Interval Transfer Bitrate Retr Cwnd [ 5] 0.00-1.00 sec 151 MBytes 1.27 Gbits/sec 3562 164 KBytes [ 5] 1.00-2.00 sec 134 MBytes 1.12 Gbits/sec 230 164 KBytes [ 5] 2.00-3.00 sec 124 MBytes 1.04 Gbits/sec 250 213 KBytes [ 5] 3.00-4.00 sec 122 MBytes 1.03 Gbits/sec 229</description><dc:creator>微信公众号</dc:creator><category>博文</category><category>Calico</category><category>Pod</category><category>带宽</category><category>限制</category></item><item><title>源码分析 Kubernetes 对 Pod IP 的管理</title><link>https://www.chenshaowen.com/blog/source-analysis-kubernetes-management-of-pod-ip.html</link><pubDate>Thu, 02 Nov 2023 19:45:31 +0000</pubDate><atom:modified>Thu, 02 Nov 2023 19:45:31 +0000</atom:modified><guid>https://www.chenshaowen.com/blog/source-analysis-kubernetes-management-of-pod-ip.html</guid><description>1. kube-controller-manager 对网段的管理 在 kube-controller-manager 有众多控制器，与 Pod IP 相关的是 NodeIpamController。 NodeIpamController 控制器主要是管理节点的 podcidr，当有新节点加入集群时，分配一个子网段给节点；当节点删除时，回收子网段。 每个节点的子网段不会重叠，每个节点都能够独立</description><dc:creator>微信公众号</dc:creator><category>源码分析</category><category>Kubernetes</category><category>Pod</category><category>IP</category><category>网络</category><category>博文</category></item><item><title>如何给 Kubernetes 应用设置 HPA 以及相关参数</title><link>https://www.chenshaowen.com/blog/how-to-set-hpa-for-kubernetes-app.html</link><pubDate>Thu, 08 Jun 2023 00:00:00 +0000</pubDate><atom:modified>Thu, 08 Jun 2023 00:00:00 +0000</atom:modified><guid>https://www.chenshaowen.com/blog/how-to-set-hpa-for-kubernetes-app.html</guid><description>1. 业务背景 当企业达到一定规模时，完全依赖于公有云基础设施，IT 成本会很高。 采购物理机器的成本可以摊薄到未来 3~5 年，之后机器并不会报废，而是会继续超期服役。私有云需要配比一定运维人员、购买专线带宽、机房费用等，IT 服务达到一定规模才能有效降低成</description><dc:creator>微信公众号</dc:creator><category>博文</category><category>Kubernetes</category><category>HPA</category><category>Pod</category></item><item><title>Kubernetes Job 创建了近 3W Pod，差点导致严重事故</title><link>https://www.chenshaowen.com/blog/kubernetes-job-create-3w-pod-attack-cluster.html</link><pubDate>Wed, 17 Aug 2022 00:00:00 +0000</pubDate><atom:modified>Wed, 17 Aug 2022 00:00:00 +0000</atom:modified><guid>https://www.chenshaowen.com/blog/kubernetes-job-create-3w-pod-attack-cluster.html</guid><description>1. 相关背景 早上 10:00 因同事需求，我通过工具在集群上创建 Kubernetes Job 执行任务。 工具创建 Job 时，会拿到集群上的全部节点，然后逐个绑定节点创建 Job。例如，如下集群: 1 2 3 4 5 6 7 8 9 10 kubectl get node NAME STATUS ROLES AGE VERSION node2 Ready control-plane,master,worker 64d v1.16.11 node3 Ready control-plane,master,worker 64d v1.16.11 node4 Ready control-plane,master,worker 64d v1.16.11 node5 Ready worker 64d v1.16.11 node6 Ready worker 64d v1.16.11 node7 NotReady,SchedulingDisabled worker 64d</description><dc:creator>微信公众号</dc:creator><category>Kubernetes</category><category>Job</category><category>Pod</category><category>事故</category><category>博文</category></item><item><title>如何设置 Pod 到指定节点运行</title><link>https://www.chenshaowen.com/blog/how-to-set-up-pod-to-run-to-a-specified-node.html</link><pubDate>Mon, 27 Jun 2022 00:00:00 +0000</pubDate><atom:modified>Mon, 27 Jun 2022 00:00:00 +0000</atom:modified><guid>https://www.chenshaowen.com/blog/how-to-set-up-pod-to-run-to-a-specified-node.html</guid><description>1. 创建负载时，通过 nodeSelector 指定 Node 给节点添加标签 1 kubectl label node node2 project=A 指定 nodeSelector 创建工作负载 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 cat &amp;lt;&amp;lt;EOF | kubectl apply -f - apiVersion: apps/v1 kind: Deployment metadata: name: nginx-nodeselector spec: replicas: 1 selector: matchLabels: app: nginx-nodeselector template: metadata: labels: app: nginx-nodeselector spec: nodeSelector: project: A containers: - name: nginx image: nginx EOF 查看工作负载 1 2 3 4 kubectl get pod -o wide NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES</description><dc:creator>微信公众号</dc:creator><category>博文</category><category>Pod</category><category>Kubernetes</category><category>调度</category></item></channel></rss>