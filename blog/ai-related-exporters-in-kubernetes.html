<!doctype html><html lang=zh dir=ltr><head prefix="og: http://ogp.me/ns#"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Kubernetes 集群中 AI 相关的采集器 – 陈少文的网站</title><script defer src=/js/fuse.min.32195737929df2c8096e855a5789cbb3f1331224d9169e8705493e7008f47df8.js></script>
<script src=/js/enquire.min.dfb99dee1e029d51d6cfb672d847929890b1585402de17f5ed092edd72a688b4.js></script>
<script defer src=/js/lazysizes.min.fb649fcae62177dfe63e67081ddceb830b5ce1f05a4184e9bbb7d87ac4b8f4e5.js></script>
<script defer src=/js/helper/getParents.min.086022fb02d7a1517e33c2670bffb976b3e80bcacd9caeee0c6a586064f20e42.js></script>
<script defer src=/js/helper/fadeinout.min.3ce954c8aea3b69cc5e6f734d8273ba4cd48d3a7987dbdca145849bc4b8fc296.js></script>
<script defer src=/js/helper/closest.min.js></script>
<script>"use strict";window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),String.prototype.includes||(String.prototype.includes=function(e,t){"use strict";if(e instanceof RegExp)throw TypeError("first argument must not be a RegExp");return t===void 0&&(t=0),this.indexOf(e,t)!==-1}),Document.prototype.append=Element.prototype.append=function(){this.appendChild(_mutation(arguments))};function _mutation(e){if(!e.length)throw new Error("DOM Exception 8");if(e.length===1)return typeof e[0]=="string"?document.createTextNode(e[0]):e[0];for(var t,n=document.createDocumentFragment(),o=e.length,s=-1;++s<o;)t=e[s],n.appendChild(typeof t=="string"?document.createTextNode(t):t);return n}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t}),document.addEventListener("DOMContentLoaded",function(){var e,t,n,s,o,i,a,r,c,l,d,u,h,m,f,p,v,b,j,y,_,w,O,x,C,k,A,S,M,F,T,z,D,N,L,R,P,H,I,B,V,$,W,U,K,q,Y,G,E=document.querySelector(".navbar__burger"),ie,ae,re,ce,ue,de,le,oe,se,ne,te,pe,fe,he;E?E.addEventListener("click",function(){var n,t=document.querySelector(".navbarm__collapse");t&&(n=t.getAttribute("data-open"),n==="true"?(t.setAttribute("data-open","false"),t.style.maxHeight=0,E.classList.remove("is-active")):(t.setAttribute("data-open","true"),t.style.maxHeight=t.scrollHeight+"px",E.classList.add("is-active")))}):null,q=document.querySelectorAll(".single__contents > table");for(let e=0;e<q.length;e++)M=q[e],F=document.createElement("div"),F.className="table-wrapper",M.parentElement.replaceChild(F,M),F.appendChild(M);V=document.querySelectorAll(".footnote-ref"),B=document.querySelectorAll(".footnote-backref"),V?V.forEach(function(e){e.onmouseenter=function(){t.classList.contains("scrolling")&&t.classList.remove("scrolling")},e.onmouseleave=function(){t.classList.contains("scrolling")||setTimeout(function(){t.classList.add("scrolling")},100)},e.onclick=function(){t.classList.contains("scrolling")||(t.classList.remove("navbar--show"),t.classList.remove("navbar--hide"),t.classList.add("navbar--hide"))}}):null,B?B.forEach(function(e){e.onmouseenter=function(){t.classList.contains("scrolling")&&t.classList.remove("scrolling")},e.onmouseleave=function(){t.classList.contains("scrolling")||setTimeout(function(){t.classList.add("scrolling")},100)},e.onclick=function(){t.classList.contains("scrolling")||(t.classList.remove("navbar--show"),t.classList.remove("navbar--hide"),t.classList.add("navbar--hide"))}}):null,s=document.querySelector(".summary__container"),i=document.querySelector(".search-result"),D=document.querySelector(".search-result__close"),D?D.addEventListener("click",function(){i.setAttribute("data-display","none"),s.setAttribute("data-display","block")}):null,document.querySelectorAll(".tab")?document.querySelectorAll(".tab").forEach(function(e){var o=e.getAttribute("id"),i=e,n=e.querySelectorAll(".tab__link"),s=e.querySelectorAll(".tab__content"),a=[];n&&n.length>0?n.forEach(function(e,t,n){e.onclick=function(){for(var o=0;o<n.length;o++)t===parseInt(o,10)?n[o].classList.contains("active")||(n[o].classList.add("active"),s[o].style.display="block"):(n[o].classList.remove("active"),s[o].style.display="none")}}):null}):null,document.querySelectorAll(".codetab")?document.querySelectorAll(".codetab").forEach(function(e){var o=e.getAttribute("id"),i=e,n=e.querySelectorAll(".codetab__link"),s=e.querySelectorAll(".codetab__content"),a=[];n&&n.length>0?n.forEach(function(e,t,n){e.onclick=function(){for(var o=0;o<n.length;o++)t===parseInt(o,10)?n[o].classList.contains("active")||(n[o].classList.add("active"),s[o].style.display="block"):(n[o].classList.remove("active"),s[o].style.display="none")}}):null}):null,v=document.getElementById("gtt"),v.style.display="none",v.addEventListener("click",function(){window.document.documentMode?document.documentElement.scrollTop=0:ge(250)});function ge(e){var t=-window.scrollY/(e/15),n=setInterval(function(){window.scrollY!=0?window.scrollBy(0,t):clearInterval(n)},15)}ie=function(){document.body.scrollTop>250||document.documentElement.scrollTop>250?v.style.display="block":v.style.display="none"},P=document.querySelectorAll(".expand__button");for(let e=0;e<P.length;e++)P[e].addEventListener("click",function(){var e=this.nextElementSibling;e.style.maxHeight?(e.style.maxHeight=null,this.querySelector("svg").classList.add("expand-icon__right"),this.querySelector("svg").classList.remove("expand-icon__down")):(e.style.maxHeight=e.scrollHeight+"px",this.querySelector("svg").classList.remove("expand-icon__right"),this.querySelector("svg").classList.add("expand-icon__down"))});z=window.pageYOffset||document.documentElement.scrollTop,p=document.querySelector(".toc"),r=p?p.querySelector("#TableOfContents"):null,x=document.getElementById("toggle-toc"),d=document.querySelector(".single__contents"),t=document.querySelector(".navbar"),b=document.querySelector(".toc__flexbox"),j=document.querySelector(".toc__flexbox--outer"),L=document.querySelectorAll(".expand__content"),N=document.querySelectorAll(".box"),o=null,S=JSON.parse("true"),a=JSON.parse('["h2","h3","h4"]'),a?a=a.toString():a="h1, h2, h3, h4, h5, h6",d&&d.querySelectorAll(".tab")?d.querySelectorAll(".tab").forEach(function(e){e.querySelectorAll(a).forEach(function(e){o=Array.isArray(o)?o.concat(e.getAttribute("id")):[e.getAttribute("id")]})}):null,L?L.forEach(function(e){e.querySelectorAll(a).forEach(function(e){o=Array.isArray(o)?o.concat(e.getAttribute("id")):[e.getAttribute("id")]})}):null,N?N.forEach(function(e){e.querySelectorAll(a).forEach(function(e){o=Array.isArray(o)?o.concat(e.getAttribute("id")):[e.getAttribute("id")]})}):null,window.onscroll=function(){ie();var e=window.pageYOffset||document.documentElement.scrollTop;if(e>z){if(e<250?v.style.display="none":v.style.display="block",e<45)return null;t.classList.contains("scrolling")&&(t.classList.contains("navbar--hide")?t.classList.contains("navbar--show")&&t.classList.remove("navbar--show"):t.classList.add("navbar--hide")),d&&(d.querySelectorAll(a).length>0?d.querySelectorAll(a).forEach(function(e){if(x&&!x.checked)return null;if(o&&o.includes(e.getAttribute("id")))return null;if(document.documentElement.scrollTop>=e.offsetTop&&r){var t,n=e.getAttribute("id");p.querySelectorAll("a").forEach(function(e){e.classList.remove("active")}),p.querySelector('a[href="#'+n+'"]')?p.querySelector('a[href="#'+n+'"]').classList.add("active"):null,!1===S||(r.querySelectorAll("ul")?r.querySelectorAll("ul").forEach(function(e){e.querySelectorAll("li").forEach(function(e){e.querySelectorAll("ul").forEach(function(e){e.style.display="none"})})}):null),t=r.querySelector("[href='#"+n+"']"),t&&t.nextElementSibling&&(t.nextElementSibling.style.display="block"),getParents(t,"ul")?getParents(t,"ul").forEach(function(e){e.style.display="block"}):null}}):(b&&(b.setAttribute("data-position",""),b.classList.contains("hide")||b.classList.add("hide")),j&&(j.setAttribute("data-position",""),j.classList.contains("hide")||j.classList.add("hide"))))}else e<250&&(v.style.display="none"),t.classList.contains("scrolling")&&(t.classList.contains("navbar--hide")?t.classList.remove("navbar--hide"):t.classList.contains("navbar--show")||t.classList.add("navbar--show")),d&&(d.querySelectorAll(a).length>0?d.querySelectorAll(a).forEach(function(e){if(x&&!x.checked)return null;if(o&&o.includes(e.getAttribute("id")))return null;if(document.documentElement.scrollTop>=e.offsetTop&&r){var t,n=e.getAttribute("id");p.querySelectorAll("a").forEach(function(e){e.classList.remove("active")}),p.querySelector('a[href="#'+n+'"]')?p.querySelector('a[href="#'+n+'"]').classList.add("active"):null,!1===S||(r.querySelectorAll("ul")?r.querySelectorAll("ul").forEach(function(e){e.querySelectorAll("li").forEach(function(e){e.querySelectorAll("ul").forEach(function(e){e.style.display="none"})})}):null),t=r.querySelector("[href='#"+n+"']"),t&&t.nextElementSibling&&(t.nextElementSibling.style.display="block"),getParents(t,"ul")?getParents(t,"ul").forEach(function(e){e.style.display="block"}):null}}):(b&&!b.classList.contains("hide")&&b.classList.add("hide"),j&&!j.classList.contains("hide")&&j.classList.add("hide"))),r&&document.documentElement.scrollTop<250&&(!1===S||(r.querySelector("ul")?r.querySelector("ul").querySelectorAll("li").forEach(function(e){e.querySelectorAll("ul").forEach(function(e){e.style.display="none"})}):null));z=e<=0?0:e},A=localStorage.getItem("theme"),T=document.getElementById("root"),ae=document.querySelectorAll(".select-theme"),C=document.querySelectorAll(".select-theme__item"),re=JSON.parse('"dark"'),ce=JSON.parse('"light"'),ue=JSON.parse('"hacker"'),de=JSON.parse('"solarized"'),le=JSON.parse('"kimbie"'),k=function(e){var t=document.getElementsByName("msapplication-TileColor")[0],n=document.getElementsByName("theme-color")[0],s=document.getElementsByName("msapplication-navbutton-color")[0],o=document.getElementsByName("apple-mobile-web-app-status-bar-style")[0];e.includes("dark")?(t.setAttribute("content","#fcfcfa"),n.setAttribute("content","#403E41"),s.setAttribute("content","#403E41"),o.setAttribute("content","#403E41")):e.includes("light")?(t.setAttribute("content","#555"),n.setAttribute("content","#eee"),s.setAttribute("content","#eee"),o.setAttribute("content","#eee")):e.includes("hacker")?(t.setAttribute("content","#e3cd26"),n.setAttribute("content","#252526"),s.setAttribute("content","#252526"),o.setAttribute("content","#252526")):e.includes("solarized")?(t.setAttribute("content","#d3af86"),n.setAttribute("content","#51412c"),s.setAttribute("content","#51412c"),o.setAttribute("content","#51412c")):e.includes("kimbie")&&(t.setAttribute("content","#586e75"),n.setAttribute("content","#eee8d5"),s.setAttribute("content","#eee8d5"),o.setAttribute("content","#eee8d5"))},Y=function(e){if(e===re)return"dark";if(e===ce)return"light";if(e===ue)return"hacker";if(e===de)return"solarized";if(e===le)return"kimbie"},A?(C?C.forEach(function(e){e.text.trim()===A?e.classList.add("is-active"):e.classList.remove("is-active")}):null,k(A)):k(T.className),C?C.forEach(function(e){e.addEventListener("click",function(e){var n,s,t=Y(e.target.text.trim());localStorage.setItem("theme",t),k(t),T.removeAttribute("class"),T.classList.add("theme__"+t),ae.forEach(function(e){e.querySelectorAll("a").forEach(function(e){e.classList&&(e.text.trim()===t?e.classList.contains("is-active")||e.classList.add("is-active"):e.classList.contains("is-active")&&e.classList.remove("is-active"))})}),window.mermaid&&(t==="dark"||t==="hacker"?(mermaid.initialize({theme:"dark"}),location.reload()):(mermaid.initialize({theme:"default"}),location.reload())),n=document.getElementById("utterances"),n&&n.querySelector("iframe").contentWindow.postMessage({type:"set-theme",theme:t==="dark"||t==="hacker"?"photon-dark":t==="kimbie"?"github-dark-orange":"github-light"},"https://utteranc.es"),s=document.querySelectorAll(".twitter-timeline"),s&&window.postMessage({type:"set-twitter-theme",theme:t==="light"||t==="solarized"?"light":"dark"})})}):null,G=JSON.parse('"https://www.chenshaowen.com"'),oe=JSON.parse('"https://www.chenshaowen.com/blog/ai-related-exporters-in-kubernetes.html"'),se=JSON.parse('""'),l=null,c=null,n=null,ne=JSON.parse("true"),y=JSON.parse("true"),U=JSON.parse('"main"'),K=JSON.parse('"post"'),te=JSON.parse('"page"'),O=null,ne&&function(){var t=new XMLHttpRequest;K==="publication"&&te!=="page"?t.open("GET",oe+"index.json"):t.open("GET",G+se+"/index.json"),t.setRequestHeader("Content-Type","application/json; charset=utf-8"),t.onload=function(){t.status===200?(O=new Fuse(JSON.parse(t.response.toString("utf-8")),{keys:K.includes("publication")?["title","abstract"]:["title","description","content"],includeMatches:y,shouldSort:!0,threshold:.4,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,isCaseSensitive:!1,findAllMatches:!1,useExtendedSearch:!1}),window.fuse=O):console.error("["+t.status+"]Error:",t.statusText)},t.send()}();function me(e,t){var n,s,o=document.createElement("li");o.className="search-result__item",n=document.createElement("a"),n.innerHTML=t.item.title,n.setAttribute("class","search-result__item--title"),n.setAttribute("href",t.item.permalink),s=document.createElement("div"),s.setAttribute("class","search-result__item--desc"),t.item.description?s.innerHTML=t.item.description:t.item.content&&(s.innerHTML=t.item.content.substring(0,225)),o.appendChild(n),o.appendChild(s),e.appendChild(o)}function be(e,t){var n,s,o,i=document.createElement("li");if(i.className="search-result__item",n=null,o=document.createElement("a"),o.innerHTML=t.item.title,o.setAttribute("class","search-result__item--title"),o.setAttribute("href",t.item.uri),t.matches&&t.matches.length){for(s=0;s<t.matches.length;s++)"title"===t.matches[s].key&&(o=document.createElement("a"),o.innerHTML=g(t.matches[s].value,t.matches[s].indices),o.setAttribute("class","search-result__item--title"),o.setAttribute("href",t.item.uri)),"description"===t.matches[s].key?(n=document.createElement("div"),n.setAttribute("class","search-result__item--desc"),n.innerHTML=g(t.item.description,t.matches[s].indices)):"content"===t.matches[s].key?n||(n=document.createElement("div"),n.setAttribute("class","search-result__item--desc"),n.innerHTML=g(t.item.content.substring(0,150),t.matches[s].indices)):t.item.description?(n=document.createElement("div"),n.setAttribute("class","search-result__item--desc"),n.innerHTML=t.item.description):(n=document.createElement("div"),n.setAttribute("class","search-result__item--desc"),n.innerHTML=t.item.content.substring(0,150));i.appendChild(o),n&&i.appendChild(n),i&&e.appendChild(i)}}function Q(e,t){l=document.getElementById("search-results"),c=document.getElementById("search-menu"),l.setAttribute("class","dropdown is-active");var s,n=document.createElement("ul");for(n.setAttribute("class","dropdown-content search-content"),t.length?t.forEach(function(e){var t,o,i=document.createElement("li"),s=document.createElement("a");s.setAttribute("href",e.uri),s.setAttribute("class","dropdown-item"),s.appendChild(i),o=document.createElement("div"),o.innerHTML=e.title,o.setAttribute("class","menu-item__title"),t=document.createElement("div"),t.setAttribute("class","menu-item__desc"),e.description?t.innerHTML=e.description:e.content&&(t.innerHTML=e.content.substring(0,150)),i.appendChild(o),i.appendChild(t),n.appendChild(s)}):(s=document.createElement("li"),s.setAttribute("class","dropdown-item"),s.innerText="No results found",n.appendChild(s));c.hasChildNodes();)c.removeChild(c.lastChild);c.appendChild(n)}function Z(e,t){l=document.getElementById("search-results"),c=document.getElementById("search-menu"),l.setAttribute("class","dropdown is-active");var s,n=document.createElement("ul");for(n.setAttribute("class","dropdown-content search-content"),t.length?t.forEach(function(e){var s,o,a=document.createElement("li"),i=document.createElement("a"),t=null;if(i.setAttribute("href",e.item.uri),i.setAttribute("class","dropdown-item"),i.appendChild(a),o=document.createElement("div"),o.innerHTML=e.item.title,o.setAttribute("class","menu-item__title"),e.matches&&e.matches.length){for(s=0;s<e.matches.length;s++)"title"===e.matches[s].key&&(o.innerHTML=g(e.matches[s].value,e.matches[s].indices)),"description"===e.matches[s].key?(t=document.createElement("div"),t.setAttribute("class","menu-item__desc"),t.innerHTML=g(e.item.description,e.matches[s].indices)):"content"===e.matches[s].key?t||(t=document.createElement("div"),t.setAttribute("class","menu-item__desc"),t.innerHTML=g(e.item.content.substring(0,150),e.matches[s].indices)):e.item.description?(t=document.createElement("div"),t.setAttribute("class","menu-item__desc"),t.innerHTML=e.item.description):(t=document.createElement("div"),t.setAttribute("class","menu-item__desc"),t.innerHTML=e.item.content.substring(0,150));a.appendChild(o),t&&a.appendChild(t),n.appendChild(i)}}):(s=document.createElement("li"),s.setAttribute("class","dropdown-item"),s.innerText="No results found",n.appendChild(s));c.hasChildNodes();)c.removeChild(c.lastChild);c.appendChild(n)}function J(e,t){l=document.getElementById("search-mobile-results");var o,n=document.createElement("div");n.setAttribute("class","mobile-search__content"),t.length>0?t.forEach(function(e){var t=document.createElement("a");t.setAttribute("href",e.uri),t.innerHTML='<div class="mobile-search__item"><div class="mobile-search__item--title">📄 '+e.title+'</div><div class="mobile-search__item--desc">'+(e.description?e.description:e.content)+"</div></div>",n.appendChild(t)}):(o=document.createElement("span"),n.appendChild(o));let s=document.getElementById("search-mobile-results");for(;s.firstChild;)s.removeChild(s.firstChild);l.appendChild(n)}function ve(e,t){l=document.getElementById("search-mobile-results");var o,n=document.createElement("div");n.setAttribute("class","mobile-search__content"),t.length?t.forEach(function(e){var s,o,i=document.createElement("li"),a=document.createElement("a"),t=null;if(a.setAttribute("href",e.item.uri),a.appendChild(i),i.setAttribute("class","mobile-search__item"),o=document.createElement("div"),o.innerHTML=e.item.title,o.setAttribute("class","mobile-search__item--title"),e.matches&&e.matches.length){for(s=0;s<e.matches.length;s++)"title"===e.matches[s].key&&(o.innerHTML=g(e.matches[s].value,e.matches[s].indices)),"description"===e.matches[s].key?(t=document.createElement("div"),t.setAttribute("class","mobile-search__item--desc"),t.innerHTML=g(e.item.description,e.matches[s].indices)):"content"===e.matches[s].key?t||(t=document.createElement("div"),t.setAttribute("class","mobile-search__item--desc"),t.innerHTML=g(e.item.content.substring(0,150),e.matches[s].indices)):e.item.description?(t=document.createElement("div"),t.setAttribute("class","mobile-search__item--desc"),t.innerHTML=e.item.description):(t=document.createElement("div"),t.setAttribute("class","mobile-search__item--desc"),t.innerHTML=e.item.content.substring(0,150));i.appendChild(o),t&&i.appendChild(t),n.appendChild(a)}}):(o=document.createElement("span"),n.appendChild(o));let s=document.getElementById("search-mobile-results");for(;s.firstChild;)s.removeChild(s.firstChild);l.appendChild(n)}function g(e,t){if(!t)return e;var n="",s=0;return t.forEach(function(t){if(t[0]===t[1])return null;n+=""+e.substring(s,t[0])+'<span class="search__highlight">'+e.substring(t[0],t[1]+1)+"</span>",s=t[1]+1}),n+=e.substring(s),n}u=document.getElementById("search"),H=document.getElementById("search-mobile"),m=document.getElementById("search-results"),u?u.addEventListener("input",function(e){if(!e.target.value|window.innerWidth<770)return m?m.setAttribute("class","dropdown"):null,i?i.setAttribute("data-display","none"):null,s?s.setAttribute("data-display","block"):null,null;n=e.target.value;var o,t=O.search(e.target.value);U==="main"?y?X(n,t):ee(n,t):(y?Z(n,t):Q(n,t),o=m.querySelectorAll(".dropdown-item"),o?o.forEach(function(e){e.addEventListener("mousedown",function(e){e.target.click()})}):null)}):null,u?u.addEventListener("blur",function(){if(window.innerWidth<770)return null;m?m.setAttribute("class","dropdown"):null}):null,u?u.addEventListener("click",function(e){if(window.innerWidth<770)return null;if(!e.target.value)return m?m.setAttribute("class","dropdown"):null,null;n=e.target.value;var s,t=O.search(e.target.value);U==="main"?y?X(n,t):ee(n,t):(y?Z(n,t):Q(n,t),s=m.querySelectorAll(".dropdown-item"),s?s.forEach(function(e){e.addEventListener("mousedown",function(e){e.target.click()})}):null)}):null,pe=document.getElementById("search-menu"),fe=document.querySelector("#search-menu .dropdown-item.is-active"),e=null,he=null,I=350,u?u.addEventListener("keydown",function(t){if(window.innerWidth<770)return null;t.key==="Escape"&&(i?i.setAttribute("data-display","none"):null,s?s.setAttribute("data-display","block"):null);var n=document.querySelectorAll("#search-menu .dropdown-item"),o=t.which||t.keyCode;if(!n||!n.length)return null;if(t.key==="ArrowDown"||o===40){e===null?(e=0,n[e].classList.remove("is-active")):(n[e].classList.remove("is-active"),e=e===n.length-1?0:e+1),n[e].classList.add("is-active");let t=n[e].offsetTop+n[e].clientHeight-I;t>0?document.querySelector(".search-content").scrollTop+=n[e].getBoundingClientRect().height:e===0&&(document.querySelector(".search-content").scrollTop=0)}else if(t.key==="ArrowUp"||o===38){e===null?(e=n.length-1,n[e].classList.remove("is-active")):(n[e].classList.remove("is-active"),e=e===0?n.length-1:e-1),n[e].classList.add("is-active");let t=n[e].offsetTop+n[e].clientHeight-I;t<0?document.querySelector(".search-content").scrollTop-=n[e].getBoundingClientRect().height:document.querySelector(".search-content").scrollTop=t+n[e].getBoundingClientRect().height}else t.key==="Enter"||o===13?n[e]&&n[e].getAttribute("href")&&(location.href=n[e].getAttribute("href")):(t.key==="Escape"||o===27)&&(t.target.value=null,l&&l.classList.remove("is-active"))}):null,H?H.addEventListener("input",function(e){if(!e.target.value){let e=document.getElementById("search-mobile-results");for(;e.firstChild;)e.removeChild(e.firstChild);return null}n=e.target.value;var t=O.search(e.target.value);J(n,t),y?ve(n,t):J(n,t)}):null,f=document.querySelector("#search-mobile"),R=document.querySelector(".mobile-search"),$=document.querySelectorAll(".navbar-search"),W=document.querySelector("#search-mobile-close"),w=document.querySelector("#search-mobile-container"),h=document.querySelector("#search-mobile-results"),_=document.querySelector("html"),R&&(R.style.display="none"),$?$.forEach(function(e){e.addEventListener("click",function(){w&&(w.style.display="block"),f&&f.focus(),_&&(_.style.overflowY="hidden")})}):null,W?W.addEventListener("click",function(){if(w&&(w.style.display="none"),f&&(f.value=""),h)for(;h.firstChild;)h.removeChild(h.firstChild);_&&(_.style.overflowY="visible")}):null,f?f.addEventListener("keydown",function(e){var t=e.which||e.keyCode;if(e.key==="Escape"||t===27){if(w&&(w.style.display="none"),f&&(f.value=""),h)for(;h.firstChild;)h.removeChild(h.firstChild);_&&(_.style.overflowY="visible")}}):null;function ee(e,t){var a=document.querySelector(".search-result__body"),n=a.querySelector("ul"),o=document.createElement("ul");e?t&&t&&t.length&&(t.forEach(function(e){me(o,e)}),i?i.setAttribute("data-display","block"):null,s?s.setAttribute("data-display","none"):null):(i?i.setAttribute("data-display","none"):null,s?s.setAttribute("data-display","block"):null),n.parentNode.replaceChild(o,n)}function X(e,t){var a=document.querySelector(".search-result__body"),n=a.querySelector("ul"),o=document.createElement("ul");e?t&&t&&t.length&&(t.forEach(function(e){be(o,e)}),i?i.setAttribute("data-display","block"):null,s?s.setAttribute("data-display","none"):null):(i?i.setAttribute("data-display","none"):null,s?s.setAttribute("data-display","block"):null),n.parentNode.replaceChild(o,n)}})</script><link rel=stylesheet href=/css/main.min.css><meta name=description content="关注 AI、云原生相关技术，同时也对团队文化、经营策略感兴趣。"><meta name=keywords content="博文,Kubernetes,AI,指标,采集"><meta name=created content="2024-02-04T00:00:00+0000"><meta name=modified content="2024-02-04T00:00:00+0000"><meta property="article:published_time" content="2024-02-04T00:00:00+0000"><meta name=author content="微信公众号"><meta property="og:site_name" content="陈少文的网站"><meta property="og:title" content="Kubernetes 集群中 AI 相关的采集器"><meta property="og:url" content="https://www.chenshaowen.com/blog/ai-related-exporters-in-kubernetes.html"><meta property="og:type" content="article"><meta property="og:description" content="关注 AI、云原生相关技术，同时也对团队文化、经营策略感兴趣。"><meta name=generator content="Hugo 0.110.0"><meta name=msapplication-TileColor content="#fff"><meta name=theme-color content="#fff"><meta name=msapplication-navbutton-color content="#fff"><meta name=apple-mobile-web-app-status-bar-style content="#fff"><link rel=canonical href=https://www.chenshaowen.com/blog/ai-related-exporters-in-kubernetes.html><link rel=manifest href=/manifest.json><link rel=apple-touch-icon sizes=57x57 href=/favicon/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/favicon/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/favicon/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/favicon/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/favicon/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/favicon/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/favicon/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/favicon/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/favicon/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/favicon/android-icon-192x192.png><link rel=icon type=image/png sizes=192x192 href=/favicon/android-icon-512x512.png><link rel=icon type=image/png sizes=32x32 href=/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/favicon/favicon-16x16.png><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="/ms-icon-144x144.png"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Kubernetes 集群中 AI 相关的采集器","datePublished":"2024-02-04T00:00:00Z","dateModified":"2024-02-04T00:00:00Z","url":"https://www.chenshaowen.com/blog/ai-related-exporters-in-kubernetes.html","description":"1. dcgm-exporter dcgm-exporter 是 NVIDIA 官方社区提供的 GPU 监控工具。 项目地址 https://github.com/NVIDIA/dcgm-exporter 1.1 安装方式 添加 Helm 镜像仓库 1 helm repo add gpu-helm-charts …","keywords":["博文","Kubernetes","AI","指标","采集"],"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.chenshaowen.com"},"publisher":{"@type":"Organization","name":"陈少文的网站","url":"https://www.chenshaowen.com"}}</script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MTW4XNQ" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><script>var dataLayer=window.dataLayer=window.dataLayer||[];dataLayer.push({page:"Kubernetes 集群中 AI 相关的采集器",categories:"only examples about your dataLayer"})</script><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-MTW4XNQ")</script></head><body id=root class=theme__light><script>var localTheme=localStorage.getItem("theme");localTheme&&(document.getElementById("root").className="theme__"+localTheme)</script><div id=container><div class=wrapper data-type=post data-kind=page><nav class="navbar scrolling" role=navigation aria-label="main navigation" data-dir=ltr><div class=navbar__brand><a href=/ title=主页 rel=home class=navbar__logo-link><img src=/logo.png alt=Home class=navbar__logo></a>
<a href=/ title=主页 rel=home class=navbar__title-link><h6 class=navbar__title>陈少文的网站</h6></a></div><div class="theme theme-mobile" data-ani=true><div class=dropdown><button class="dropdown-trigger navbar__slide-down" aria-label="Select Theme Button" data-ani=true><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="none" d="M24 0H0v24h24V0z"/><path fill="currentcolor" d="M6.34 7.93c-3.12 3.12-3.12 8.19.0 11.31C7.9 20.8 9.95 21.58 12 21.58s4.1-.78 5.66-2.34c3.12-3.12 3.12-8.19.0-11.31l-4.95-4.95c-.39-.39-1.02-.39-1.41.0L6.34 7.93zM12 19.59c-1.6.0-3.11-.62-4.24-1.76C6.62 16.69 6 15.19 6 13.59s.62-3.11 1.76-4.24L12 5.1v14.49z"/></svg></button><div class="dropdown-content select-theme"><a href=# class="dropdown-item select-theme__item is-active">light</a>
<a href=# class="dropdown-item select-theme__item">dark</a></div></div></div><div class="mobile-search__btn navbar-search" data-ani=true><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentcolor" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49.0s.41-1.08.0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg></div><div id=search-mobile-container class="mobile-search hide" data-dir=ltr><div class=mobile-search__top><input id=search-mobile type=text aria-label="Mobile Search" placeholder=搜索 class=mobile-search__top--input><div id=search-mobile-close class=mobile-search__top--icon><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path opacity=".87" fill="none" d="M0 0h24v24H0V0z"/><path fill="currentcolor" d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41.0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"/></svg></div></div><div id=search-mobile-results class=mobile-search__body></div></div><a role=button class=navbar__burger aria-label=menu aria-expanded=false data-ani=true><span aria-hidden=true></span>
<span aria-hidden=true></span>
<span aria-hidden=true></span></a><div class=navbarm__collapse data-open=false><ul dir=ltr><li class=navbarm__menu--item><a href=https://github.com/shaowenchen/ops/>Ops 项目</a></li><li class=navbarm__menu--item><a href=/tags>标签</a></li><li class=navbarm__menu--item><a href=/presentation>演示文档</a></li><li class=navbarm__menu--item><a href=/>电子书<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"><path fill="currentcolor" d="M8.12 9.29 12 13.17l3.88-3.88c.39-.39 1.02-.39 1.41.0s.39 1.02.0 1.41l-4.59 4.59c-.39.39-1.02.39-1.41.0L6.7 10.7c-.39-.39-.39-1.02.0-1.41.39-.38 1.03-.39 1.42.0z"/></svg></a></li><li class="navbarm__menu--item navbarm__menu--subitem"><a href=/kubernetes-101/>Kubernetes 101</a></li><li class="navbarm__menu--item navbarm__menu--subitem"><a href=/devops-101/>DevOps 101</a></li><li class="navbarm__menu--item navbarm__menu--subitem"><a href=/microservices-101/>MicroServices 101</a></li><li class="navbarm__menu--item navbarm__menu--subitem"><a href=/aigc/>AIGC</a></li><li class=navbarm__menu--item><a href=/about.html>关于</a></li><li class=navbarm__menu--item><a href=/atom.xml>订阅</a></li></ul></div><div class=navbar__menu><div class=theme data-ani=true><div class=dropdown><button class="dropdown-trigger navbar__slide-down" aria-label="Select Theme Button" data-ani=true><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="none" d="M24 0H0v24h24V0z"/><path fill="currentcolor" d="M6.34 7.93c-3.12 3.12-3.12 8.19.0 11.31C7.9 20.8 9.95 21.58 12 21.58s4.1-.78 5.66-2.34c3.12-3.12 3.12-8.19.0-11.31l-4.95-4.95c-.39-.39-1.02-.39-1.41.0L6.34 7.93zM12 19.59c-1.6.0-3.11-.62-4.24-1.76C6.62 16.69 6 15.19 6 13.59s.62-3.11 1.76-4.24L12 5.1v14.49z"/></svg></button><div class="dropdown-content select-theme"><a href=# class="dropdown-item select-theme__item is-active">light</a>
<a href=# class="dropdown-item select-theme__item">dark</a></div></div></div><a href=https://github.com/shaowenchen/ops/ class="navbar__menu-item navbar__slide-down" dir=ltr data-ani=true>Ops 项目</a>
<a href=/tags class="navbar__menu-item navbar__slide-down" dir=ltr data-ani=true>标签</a>
<a href=/presentation class="navbar__menu-item navbar__slide-down" dir=ltr data-ani=true>演示文档</a><div class="navbar__dropdown navbar__slide-down" data-ani=true><a href=/ class=navbar__menu-item dir=ltr>电子书<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"><path fill="currentcolor" d="M8.12 9.29 12 13.17l3.88-3.88c.39-.39 1.02-.39 1.41.0s.39 1.02.0 1.41l-4.59 4.59c-.39.39-1.02.39-1.41.0L6.7 10.7c-.39-.39-.39-1.02.0-1.41.39-.38 1.03-.39 1.42.0z"/></svg></a><div class=navbar__dropdown--content><a href=/kubernetes-101/ class=navbar__dropdown--item dir=ltr>Kubernetes 101</a>
<a href=/devops-101/ class=navbar__dropdown--item dir=ltr>DevOps 101</a>
<a href=/microservices-101/ class=navbar__dropdown--item dir=ltr>MicroServices 101</a>
<a href=/aigc/ class=navbar__dropdown--item dir=ltr>AIGC</a></div></div><a href=/about.html class="navbar__menu-item navbar__slide-down" dir=ltr data-ani=true>关于</a>
<a href=/atom.xml class="navbar__menu-item navbar__slide-down" dir=ltr data-ani=true>订阅</a></div></nav><main class="single__main main-main"><nav class="breadcrumb hide" aria-label=breadcrumbs><script>document.querySelector(".breadcrumb").classList.remove("hide")</script><ol><li><a href=https://www.chenshaowen.com/ class=capitalize>陈少文的网站</a></li><li><a href=https://www.chenshaowen.com/post/ class=capitalize>Posts</a></li><li class=is-active><span>Kubernetes 集群中 AI 相关的采集器</span></li></ol></nav><div class=single><div class=single__nojs>Please enable Javascript to view the contents</div><script>document.querySelector(".single").classList.remove("hide"),document.querySelector(".single__nojs").classList.add("hide")</script><h2 class=single__title data-ani=true>Kubernetes 集群中 AI 相关的采集器</h2><h3 class=single__subtitle></h3><div class=single__meta><div class=single__infos><time class=single__info title=创建日期>📅&nbsp;2024年02月04日</time>
&nbsp;&#183;&nbsp; <span class=single__info title=阅读时长>☕&nbsp;12&nbsp;分钟</span>
<span class=single__info></span></div><ul class="single__tags caption">🏷️<li><a href=https://www.chenshaowen.com/tags/%E5%8D%9A%E6%96%87/ class=single__tag title=博文>#博文</a></li><li><a href=https://www.chenshaowen.com/tags/kubernetes/ class=single__tag title=Kubernetes>#Kubernetes</a></li><li><a href=https://www.chenshaowen.com/tags/ai/ class=single__tag title=AI>#AI</a></li><li><a href=https://www.chenshaowen.com/tags/%E6%8C%87%E6%A0%87/ class=single__tag title=指标>#指标</a></li><li><a href=https://www.chenshaowen.com/tags/%E9%87%87%E9%9B%86/ class=single__tag title=采集>#采集</a></li></ul></div><article class=single__contents data-dir=ltr data-ani=true><h2 id=1-dcgm-exporter>1. dcgm-exporter</h2><p>dcgm-exporter 是 NVIDIA 官方社区提供的 GPU 监控工具。</p><p>项目地址 <a href=https://github.com/NVIDIA/dcgm-exporter>https://github.com/NVIDIA/dcgm-exporter</a></p><h3 id=11-安装方式>1.1 安装方式</h3><ul><li>添加 Helm 镜像仓库</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm repo add gpu-helm-charts https://nvidia.github.io/dcgm-exporter/helm-charts
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm repo update
</span></span></code></pre></td></tr></table></div></div><ul><li>安装</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm install dcgm-exporter gpu-helm-charts/dcgm-exporter --namespace monitor --create-namespace <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>      --set serviceMonitor.enabled<span class=o>=</span><span class=nb>false</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>      --set image.repository<span class=o>=</span>hubimage/nvidia-dcgm-exporter <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>      --set image.tag<span class=o>=</span>3.3.3-3.3.0-ubuntu22.04 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>      --set nodeSelector.<span class=s2>&#34;accelerator\/provider&#34;</span><span class=o>=</span>nvidia-gpu <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>      --version 3.3.1
</span></span></code></pre></td></tr></table></div></div><p>需要给 NVIDIA GPU 节点打上标签</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl label node &lt;node-name&gt; accelerator/provider<span class=o>=</span>nvidia-gpu
</span></span></code></pre></td></tr></table></div></div><h3 id=12-指标>1.2 指标</h3><ul><li>GPU 利用率</li></ul><table><thead><tr><th>指标名称</th><th>指标类型</th><th>单位</th><th>描述</th></tr></thead><tbody><tr><td>DCGM_FI_DEV_GPU_UTIL</td><td>Gauge</td><td>%</td><td>GPU 利用率</td></tr><tr><td>DCGM_FI_DEV_MEM_COPY_UTIL</td><td>Gauge</td><td>%</td><td>GPU 内存复制利用率</td></tr><tr><td>DCGM_FI_DEV_ENC_UTIL</td><td>Gauge</td><td>%</td><td>GPU 编码器利用率</td></tr><tr><td>DCGM_FI_DEV_DEC_UTIL</td><td>Gauge</td><td>%</td><td>GPU 解码器利用率</td></tr></tbody></table><ul><li>内存</li></ul><table><thead><tr><th>指标名称</th><th>指标类型</th><th>单位</th><th>描述</th></tr></thead><tbody><tr><td>DCGM_FI_DEV_FB_FREE</td><td>Gauge</td><td>MiB</td><td>GPU 帧缓存剩余量</td></tr><tr><td>DCGM_FI_DEV_FB_USED</td><td>Gauge</td><td>MiB</td><td>GPU 帧缓存使用量</td></tr></tbody></table><p>以下是您提供的指标信息的 Markdown 表格：</p><ul><li>频率</li></ul><table><thead><tr><th>指标名称</th><th>指标类型</th><th>单位</th><th>描述</th></tr></thead><tbody><tr><td>DCGM_FI_DEV_SM_CLOCK</td><td>Gauge</td><td>MHz</td><td>GPU SM 时钟频率</td></tr><tr><td>DCGM_FI_DEV_MEM_CLOCK</td><td>Gauge</td><td>MHz</td><td>GPU 内存时钟频率</td></tr></tbody></table><ul><li>剖析</li></ul><table><thead><tr><th>指标名称</th><th>指标类型</th><th>单位</th><th>描述</th></tr></thead><tbody><tr><td>DCGM_FI_PROF_GR_ENGINE_ACTIVE</td><td>Gauge</td><td>%</td><td>在一个时间间隔内，Graphics 或 Compute 引擎处于 Active 的时间占比</td></tr><tr><td>DCGM_FI_PROF_SM_ACTIVE</td><td>Gauge</td><td>%</td><td>在一个时间间隔内，至少一个线程束在一个 SM 上处于 Active 的时间占比（均值）</td></tr><tr><td>DCGM_FI_PROF_SM_OCCUPANCY</td><td>Gauge</td><td>%</td><td>在一个时间间隔内，驻留在 SM 上的线程束与该 SM 最大可驻留线程束的比例（均值）</td></tr><tr><td>DCGM_FI_PROF_PIPE_TENSOR_ACTIVE</td><td>Gauge</td><td>%</td><td>单位时间内 Tensor Pipes 平均处于 Active 状态的周期分数</td></tr><tr><td>DCGM_FI_PROF_DRAM_ACTIVE</td><td>Gauge</td><td>%</td><td>内存拷贝活跃周期分数（一个周期内有一次 DRAM 指令则该周期为 100%）</td></tr><tr><td>DCGM_FI_PROF_PIPE_FP64_ACTIVE</td><td>Gauge</td><td>%</td><td>单位时间内 F64 Pipes 平均处于 Active 状态的周期分数</td></tr><tr><td>DCGM_FI_PROF_PIPE_FP32_ACTIVE</td><td>Gauge</td><td>%</td><td>单位时间内 F32 Pipes 平均处于 Active 状态的周期分数</td></tr><tr><td>DCGM_FI_PROF_PIPE_FP16_ACTIVE</td><td>Gauge</td><td>%</td><td>单位时间内 F16 Pipes 平均处于 Active 状态的周期分数</td></tr><tr><td>DCGM_FI_PROF_NVLINK_RX_BYTES</td><td>Counter</td><td>B/s</td><td>通过 NVLink 接收的数据流量</td></tr><tr><td>DCGM_FI_PROF_NVLINK_TX_BYTES</td><td>Counter</td><td>B/s</td><td>通过 NVLink 传输的数据流量</td></tr><tr><td>DCGM_FI_PROF_PCIE_RX_BYTES</td><td>Counter</td><td>B/s</td><td>通过 PCIe 总线接收字节数</td></tr><tr><td>DCGM_FI_PROF_PCIE_TX_BYTES</td><td>Counter</td><td>B/s</td><td>通过 PCIe 总线传输字节数</td></tr><tr><td>DCGM_FI_DEV_PCIE_REPLAY_COUNTER</td><td>Counter</td><td>次</td><td>GPU PCIe 总线的重试次数</td></tr><tr><td>DCGM_FI_DEV_NVLINK_BANDWIDTH_TOTAL</td><td>Counter</td><td>-</td><td>GPU 所有通道的 NVLink 带宽计数器总数</td></tr></tbody></table><ul><li>温度和功率</li></ul><table><thead><tr><th>指标名称</th><th>指标类型</th><th>单位</th><th>描述</th></tr></thead><tbody><tr><td>DCGM_FI_DEV_GPU_TEMP</td><td>Gauge</td><td>℃</td><td>GPU 当前温度</td></tr><tr><td>DCGM_FI_DEV_MEMORY_TEMP</td><td>Gauge</td><td>℃</td><td>GPU 显存当前温度</td></tr><tr><td>DCGM_FI_DEV_POWER_USAGE</td><td>Gauge</td><td>W</td><td>GPU 当前使用功率</td></tr><tr><td>DCGM_FI_DEV_TOTAL_ENERGY_CONSUMPTION</td><td>Counter</td><td>mJ</td><td>GPU 启动以来的总能耗</td></tr></tbody></table><ul><li>XID 错误&违规</li></ul><table><thead><tr><th>指标名称</th><th>指标类型</th><th>单位</th><th>描述</th></tr></thead><tbody><tr><td>DCGM_FI_DEV_XID_ERRORS</td><td>Gauge</td><td>-</td><td>最近发生的错误代码</td></tr><tr><td>DCGM_CUSTOM_XID_ERRORS_TOTAL_COUNTER</td><td>Counter</td><td>-</td><td>发生错误代码总数</td></tr><tr><td>DCGM_FI_DEV_POWER_VIOLATION</td><td>Counter</td><td>μs</td><td>因功率上限而导致违规的累积持续时间</td></tr><tr><td>DCGM_FI_DEV_THERMAL_VIOLATION</td><td>Counter</td><td>μs</td><td>因热限制导致违规的累积持续时间</td></tr><tr><td>DCGM_FI_DEV_SYNC_BOOST_VIOLATION</td><td>Counter</td><td>μs</td><td>因同步提升限制而导致违规的累积持续时间</td></tr><tr><td>DCGM_FI_DEV_BOARD_LIMIT_VIOLATION</td><td>Counter</td><td>μs</td><td>因电路板限制而导致违规的累积持续时间</td></tr><tr><td>DCGM_FI_DEV_LOW_UTIL_VIOLATION</td><td>Counter</td><td>μs</td><td>因低利用率限制导致违规的累积持续时间</td></tr><tr><td>DCGM_FI_DEV_RELIABILITY_VIOLATION</td><td>Counter</td><td>μs</td><td>因电路板可靠性限制导致违规的累积持续时间</td></tr></tbody></table><ul><li>停用的内存页面</li></ul><table><thead><tr><th>指标名称</th><th>指标类型</th><th>单位</th><th>描述</th></tr></thead><tbody><tr><td>DCGM_FI_DEV_RETIRED_SBE</td><td>Counter</td><td>个</td><td>因单 bit 错误而停用的内存页面</td></tr><tr><td>DCGM_FI_DEV_RETIRED_DBE</td><td>Counter</td><td>个</td><td>因双 bit 错误而停用的内存页面</td></tr></tbody></table><ul><li>其他</li></ul><table><thead><tr><th>指标名称</th><th>指标类型</th><th>单位</th><th>描述</th></tr></thead><tbody><tr><td>DCGM_FI_DEV_VGPU_LICENSE_STATUS</td><td>Gauge</td><td>-</td><td>vGPU 许可证状态</td></tr><tr><td>DCGM_FI_DEV_UNCORRECTABLE_REMAPPED_ROWS</td><td>Counter</td><td>-</td><td>因无法纠正的错误而重新映射的行数</td></tr><tr><td>DCGM_FI_DEV_CORRECTABLE_REMAPPED_ROWS</td><td>Counter</td><td>-</td><td>因可纠正的错误而重新映射的行数</td></tr><tr><td>DCGM_FI_DEV_ROW_REMAP_FAILURE</td><td>Gauge</td><td></td><td></td></tr></tbody></table><h2 id=2-npu-exporter>2. npu-exporter</h2><p>NPU-Expoter 是华为自研的专门收集华为 NPU 各种监控信息和指标，并封装成 Prometheus 专用数据格式的一个服务组件。项目地址 <a href=https://github.com/Ascend/ascend-npu-exporter>https://github.com/Ascend/ascend-npu-exporter</a></p><h3 id=21-安装方式>2.1 安装方式</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl apply -f https://raw.githubusercontent.com/shaowenchen/hubimage/main/observation/v5.0.RC3-npu-exporter.yaml
</span></span></code></pre></td></tr></table></div></div><p>需要给 Huawei NPU 节点打上标签</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl label node &lt;node-name&gt; accelerator/provider<span class=o>=</span>huawei-npu
</span></span></code></pre></td></tr></table></div></div><p>这里的 Container Runtime 为 Docker，如果是 Containerd 需要在启动参数中进行修改。</p><h3 id=22-指标>2.2 指标</h3><ul><li>处理器信息</li></ul><table><thead><tr><th>指标名称</th><th>单位</th><th>描述</th></tr></thead><tbody><tr><td>machine_npu_nums</td><td>个</td><td>昇腾 AI 处理器数目。</td></tr></tbody></table><ul><li>网络信息</li></ul><table><thead><tr><th>指标名称</th><th>单位</th><th>描述</th></tr></thead><tbody><tr><td>npu_chip_info_bandwidth_rx</td><td>MB/s</td><td>昇腾 AI 处理器网口实时接收速率（仅支持 Atlas 训练系列产品）。标签包含以下字段：</td></tr><tr><td>npu_chip_info_bandwidth_tx</td><td>MB/s</td><td>昇腾 AI 处理器网口实时发送速率（仅支持 Atlas 训练系列产品）。标签包含以下字段：</td></tr><tr><td>npu_chip_info_link_status</td><td>1：UP, 0：DOWN</td><td>昇腾 AI 处理器网口 Link 状态（仅支持 Atlas 训练系列产品）。标签包含以下字段：</td></tr><tr><td>npu_chip_info_network_status</td><td>1：健康, 0：不健康</td><td>昇腾 AI 处理器网络健康状态（仅支持 Atlas 训练系列产品）。标签包含以下字段：</td></tr></tbody></table><ul><li>错误和健康信息</li></ul><table><thead><tr><th>指标名称</th><th>取值</th><th>描述</th></tr></thead><tbody><tr><td>npu_chip_info_error_code</td><td>详见说明</td><td>昇腾 AI 处理器错误码。标签包含以下字段： 最后一列显示的-1，表示 DCMI 接口调用报错，可能是因为驱动异常导致；若为 0 表示没有错误码。错误码的详细信息请参见《Atlas A2 中心推理和训练硬件 黑匣子错误码信息列表》</td></tr><tr><td>npu_chip_info_name</td><td>-</td><td>昇腾 AI 处理器名称和 ID。标签包含以下字段：</td></tr><tr><td>npu_chip_info_health_status</td><td>1：健康, 0：不健康</td><td>昇腾 AI 处理器健康状态。标签包含以下字段：</td></tr></tbody></table><ul><li>性能信息</li></ul><table><thead><tr><th>指标名称</th><th>单位</th><th>描述</th></tr></thead><tbody><tr><td>npu_chip_info_power</td><td>瓦特（W）</td><td>昇腾 AI 处理器功耗（910 和 310 为处理器功耗，310P 为板卡功耗）。标签包含以下字段：</td></tr><tr><td>npu_chip_info_temperature</td><td>摄氏度（℃）</td><td>昇腾 AI 处理器温度。标签包含以下字段：</td></tr><tr><td>npu_chip_info_utilization</td><td>%</td><td>昇腾 AI 处理器 AI Core 利用率。标签包含以下字段：</td></tr><tr><td>npu_chip_info_aicore_current_freq</td><td>MHz</td><td>昇腾 AI 处理器的 AI Core 当前频率。标签包含以下字段：</td></tr></tbody></table><ul><li>内存信息</li></ul><table><thead><tr><th>指标名称</th><th>单位</th><th>描述</th></tr></thead><tbody><tr><td>npu_chip_info_used_memory</td><td>MB</td><td>昇腾 AI 处理器 DDR 内存已使用量。标签包含以下字段：</td></tr><tr><td>npu_chip_info_total_memory</td><td>MB</td><td>昇腾 AI 处理器 DDR 内存总量。标签包含以下字段：</td></tr><tr><td>npu_chip_info_hbm_used_memory</td><td>MB</td><td>昇腾 AI 处理器 HBM 内存已使用量（Atlas 训练系列产品专属）。标签包含以下字段：</td></tr><tr><td>npu_chip_info_hbm_total_memory</td><td>MB</td><td>昇腾 AI 处理器 HBM 总内存（Atlas 训练系列产品专属）。标签包含以下字段：</td></tr><tr><td>container_npu_total_memory</td><td>MB</td><td>带有容器信息的 NPU 内存总大小，只支持整卡。容器信息包含以下字段：</td></tr><tr><td>container_npu_used_memory</td><td>MB</td><td>带有容器信息的 NPU 已使用内存，只支持整卡。容器信息包含以下字段：</td></tr><tr><td>vnpu_pod_total_memory</td><td>KB</td><td>vNPU 拥有的总内存：（仅 Atlas 推理系列产品支持）</td></tr><tr><td>vnpu_pod_used_memory</td><td>KB</td><td>vNPU 使用中的内存：（仅 Atlas 推理系列产品支持）</td></tr></tbody></table><ul><li>容器和虚拟 NPU 信息</li></ul><table><thead><tr><th>指标名称</th><th>单位</th><th>描述</th></tr></thead><tbody><tr><td>npu_exporter_version_info</td><td>-</td><td>NPU-Exporter 版本信息。</td></tr><tr><td>npu_container_info</td><td>-</td><td>NPU 容器信息，输出包含以下字段：</td></tr><tr><td>container_npu_total_memory</td><td>MB</td><td>带有容器信息的 NPU 内存总大小，只支持整卡。容器信息包含以下字段：</td></tr><tr><td>container_npu_used_memory</td><td>MB</td><td>带有容器信息的 NPU 已使用内存，只支持整卡。容器信息包含以下字段：</td></tr><tr><td>container_npu_utilization</td><td>%</td><td>带有容器信息的 NPU 利用率，只支持整卡。容器信息包含以下字段：</td></tr><tr><td>vnpu_pod_aicore_utilization</td><td>%</td><td>vNPU 的 AI Core 利用率：（仅 Atlas 推理系列产品支持）</td></tr><tr><td>vnpu_pod_total_memory</td><td>KB</td><td>vNPU 拥有的总内存：（仅 Atlas 推理系列产品支持）</td></tr><tr><td>vnpu_pod_used_memory</td><td>KB</td><td>vNPU 使用中的内存：（仅 Atlas 推理系列产品支持）</td></tr></tbody></table><h2 id=3-node-exporter>3. node-exporter</h2><p>node-exporter 是 Prometheus 开源的一个用于采集主机各项指标的工具。</p><p>项目地址 <a href=https://github.com/prometheus/node_exporter>https://github.com/prometheus/node_exporter</a></p><h3 id=31-安装方式>3.1 安装方式</h3><blockquote><p>一般安装 Prometheus Server 时，默认已经安装 node-exporter，无需再次安装。</p></blockquote><ul><li>添加 Helm 镜像仓库</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm repo update
</span></span></code></pre></td></tr></table></div></div><ul><li>安装</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm install prometheus-node-exporter prometheus-community/prometheus-node-exporter --namespace monitor --create-namespace
</span></span></code></pre></td></tr></table></div></div><h3 id=32-指标>3.2 指标</h3><p>以下是去掉分类列后的 Markdown 表格：</p><ul><li>CPU</li></ul><table><thead><tr><th>指标名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>node_cpu_seconds_total</td><td>Counter</td><td>节点 CPU 的使用时间 (单位：秒)</td></tr></tbody></table><ul><li>内存</li></ul><table><thead><tr><th>指标名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>node_memory_MemTotal_bytes</td><td>Gauge</td><td>节点总内存大小（单位：字节）</td></tr><tr><td>node_memory_MemFree_bytes</td><td>Gauge</td><td>节点空闲内存大小（单位：字节）</td></tr><tr><td>node_memory_Buffers_bytes</td><td>Gauge</td><td>节点缓存大小（单位：字节）</td></tr><tr><td>node_memory_Cached_bytes</td><td>Gauge</td><td>节点页面缓存大小（单位：字节）</td></tr></tbody></table><ul><li>磁盘</li></ul><table><thead><tr><th>指标名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>node_filesystem_avail_bytes</td><td>Gauge</td><td>分区用户剩余空间（单位：字节）</td></tr><tr><td>node_filesystem_size_bytes</td><td>Gauge</td><td>分区空间总容量（单位：字节）</td></tr><tr><td>node_filesystem_free_bytes</td><td>Gauge</td><td>分区物理剩余空间（单位：字节）</td></tr><tr><td>node_disk_read_bytes_total</td><td>Counter</td><td>分区读总字节数（单位：字节）</td></tr><tr><td>node_disk_written_bytes_total</td><td>Counter</td><td>分区写总字节数（单位：字节）</td></tr><tr><td>node_disk_reads_completed_total</td><td>Counter</td><td>分区读总次数</td></tr><tr><td>node_disk_writes_completed_total</td><td>Counter</td><td>分区写总次数</td></tr></tbody></table><ul><li>网络</li></ul><table><thead><tr><th>指标名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>node_network_receive_bytes_total</td><td>Counter</td><td>接收流量总字节数（单位：字节）</td></tr><tr><td>node_network_transmit_bytes_total</td><td>Counter</td><td>发送流量总字节数（单位：字节）</td></tr><tr><td>node_network_receive_packets_total</td><td>Counter</td><td>接收流量总包数（单位：包）</td></tr><tr><td>node_network_transmit_packets_total</td><td>Counter</td><td>发送流量总包数（单位：包）</td></tr><tr><td>node_network_receive_drop_total</td><td>Counter</td><td>接收流量总丢包数（单位：包）</td></tr><tr><td>node_network_transmit_drop_total</td><td>Counter</td><td>发送流量总丢包数（单位：包）</td></tr></tbody></table><h2 id=4-node-problem-detector>4 node-problem-detector</h2><p>Node Problem Detector 简称 NPD，是 Kubernetes 开源的集群节点监控插件，用于节点故障检查。</p><p>项目地址 <a href=https://github.com/kubernetes/node-problem-detector>https://github.com/kubernetes/node-problem-detector</a></p><h3 id=41-安装方式>4.1 安装方式</h3><ul><li>添加 Helm 镜像仓库</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm repo add deliveryhero https://charts.deliveryhero.io/
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm repo update
</span></span></code></pre></td></tr></table></div></div><ul><li>安装</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm install node-problem-detector deliveryhero/node-problem-detector --namespace monitor --create-namespace
</span></span></code></pre></td></tr></table></div></div><h3 id=42-指标>4.2 指标</h3><ul><li>磁盘</li></ul><table><thead><tr><th>指标名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>node_filesystem_avail_bytes</td><td>Gauge</td><td>分区用户剩余空间（单位：字节）</td></tr><tr><td>node_filesystem_size_bytes</td><td>Gauge</td><td>分区空间总容量（单位：字节）</td></tr><tr><td>node_filesystem_free_bytes</td><td>Gauge</td><td>分区物理剩余空间（单位：字节）</td></tr><tr><td>node_disk_read_bytes_total</td><td>Counter</td><td>分区读总字节数（单位：字节）</td></tr><tr><td>node_disk_written_bytes_total</td><td>Counter</td><td>分区写总字节数（单位：字节）</td></tr><tr><td>node_disk_reads_completed_total</td><td>Counter</td><td>分区读总次数</td></tr><tr><td>node_disk_writes_completed_total</td><td>Counter</td><td>分区写总次数</td></tr></tbody></table><ul><li>网络</li></ul><table><thead><tr><th>指标名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>node_network_receive_bytes_total</td><td>Counter</td><td>接收流量总字节数（单位：字节）</td></tr><tr><td>node_network_transmit_bytes_total</td><td>Counter</td><td>发送流量总字节数（单位：字节）</td></tr><tr><td>node_network_receive_packets_total</td><td>Counter</td><td>接收流量总包数（单位：包）</td></tr><tr><td>node_network_transmit_packets_total</td><td>Counter</td><td>发送流量总包数（单位：包）</td></tr><tr><td>node_network_receive_drop_total</td><td>Counter</td><td>接收流量总丢包数（单位：包）</td></tr><tr><td>node_network_transmit_drop_total</td><td>Counter</td><td>发送流量总丢包数（单位：包）</td></tr></tbody></table><ul><li>CPU</li></ul><table><thead><tr><th>指标名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>cpu_load_1m</td><td>Gauge</td><td>CPU 平均负载（1 分钟）</td></tr><tr><td>cpu_load_5m</td><td>Gauge</td><td>CPU 平均负载（5 分钟）</td></tr><tr><td>cpu_load_15m</td><td>Gauge</td><td>CPU 平均负载（15 分钟）</td></tr><tr><td>cpu_runnable_task_count</td><td>Gauge</td><td>平均运行任务数（过去一分钟）</td></tr><tr><td>cpu_usage_time</td><td>Counter</td><td>CPU 使用时间（按状态分）</td></tr></tbody></table><ul><li>内存</li></ul><table><thead><tr><th>指标名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>memory_bytes_used</td><td>Gauge</td><td>内存使用量（按状态分）</td></tr><tr><td>memory_anonymous_used</td><td>Gauge</td><td>匿名内存使用量（按状态分）</td></tr><tr><td>memory_dirty_used</td><td>Gauge</td><td>脏页面内存使用量</td></tr><tr><td>memory_page_cache_used</td><td>Gauge</td><td>页面缓存内存使用量（按状态分）</td></tr><tr><td>memory_unevictable_used</td><td>Gauge</td><td>不可清除内存使用量</td></tr></tbody></table><ul><li>系统</li></ul><table><thead><tr><th>指标名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>host_uptime</td><td>Gauge</td><td>操作系统运行时间</td></tr><tr><td>system_cpu_stat</td><td>Counter</td><td>CPU 不同状态的运行时间</td></tr><tr><td>system_interrupts_total</td><td>Counter</td><td>总中断服务次数（累计）</td></tr><tr><td>system_os_feature</td><td>Gauge</td><td>操作系统特性开启状态</td></tr><tr><td>system_processes_total</td><td>Counter</td><td>启动以来的进程总数（累计）</td></tr><tr><td>system_procs_blocked</td><td>Gauge</td><td>当前阻塞的进程数</td></tr><tr><td>system_procs_running</td><td>Gauge</td><td>当前运行的进程数</td></tr></tbody></table><ul><li>问题计数</li></ul><table><thead><tr><th>指标名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>problem_counter</td><td>Counter</td><td>特定类型问题发生次数</td></tr></tbody></table><ul><li>问题状态</li></ul><table><thead><tr><th>指标名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>problem_gauge</td><td>Gauge</td><td>特定类型问题状态</td></tr></tbody></table><h2 id=5-process-exporter>5. process-exporter</h2><p>process-exporter 主要是用来监控主机上进程的状态，但非常可惜，已经很久没有更新了。</p><p>项目地址 <a href=https://github.com/mumoshu/prometheus-process-exporter>https://github.com/mumoshu/prometheus-process-exporter</a> ，监控面板 <a href=https://grafana.com/grafana/dashboards/8378-system-processes-metrics/>https://grafana.com/grafana/dashboards/8378-system-processes-metrics/</a></p><h3 id=51-安装方式>5.1 安装方式</h3><ul><li>安装</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl apply -f https://raw.githubusercontent.com/shaowenchen/hubimage/main/observation/process-exporter.yaml
</span></span></code></pre></td></tr></table></div></div><ul><li>指标配置方式</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>data</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>process-exporter.yaml</span><span class=p>:</span><span class=w> </span><span class=p>|-</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>    process_names:
</span></span></span><span class=line><span class=cl><span class=sd>    - name: &#34;{{.Matches}}&#34;
</span></span></span><span class=line><span class=cl><span class=sd>      cmdline:
</span></span></span><span class=line><span class=cl><span class=sd>      - &#39;python&#39;
</span></span></span><span class=line><span class=cl><span class=sd>    - name: &#34;{{.Matches}}&#34;
</span></span></span><span class=line><span class=cl><span class=sd>      cmdline:
</span></span></span><span class=line><span class=cl><span class=sd>      - &#39;triton&#39;</span><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>ConfigMap</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>process-exporter-config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>monitor</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><table><thead><tr><th>匹配模板</th><th>描述</th></tr></thead><tbody><tr><td>{{.Comm}}</td><td>包含原始可执行文件的名称，即/proc/<pid>/stat</td></tr><tr><td>{{.ExeBase}}</td><td>包含可执行文件的名称(默认)</td></tr><tr><td>{{.ExeFull}}</td><td>包含可执行文件的路径</td></tr><tr><td>{{.Username}}</td><td>包含的用户名</td></tr><tr><td>{{.Matches}}</td><td>包含所有正则表达式而产生的匹配项（建议使用）</td></tr><tr><td>{{.PID}}</td><td>包含进程的 PID，一个 PID 仅包含一个进程（不建议使用）</td></tr><tr><td>{{.StartTime}}</td><td>包含进程的开始时间（不建议使用）</td></tr></tbody></table><h3 id=52-指标>5.2 指标</h3><table><thead><tr><th>指标名称</th><th>描述</th></tr></thead><tbody><tr><td>namedprocess_namegroup_num_procs</td><td>运行的进程数</td></tr><tr><td>namedprocess_namegroup_states</td><td>Running/Sleeping/Other/Zombie 状态的进程数</td></tr><tr><td>namedprocess_namegroup_cpu_seconds_total</td><td>获取/proc/[pid]/stat 进程 CPU utime、stime 状态时间</td></tr><tr><td>namedprocess_namegroup_read_bytes_total</td><td>获取/proc/[pid]/io 进程读取字节数</td></tr><tr><td>namedprocess_namegroup_write_bytes_total</td><td>获取/proc/[pid]/io 进程写入字节数</td></tr><tr><td>namedprocess_namegroup_memory_bytes</td><td>获取进程使用的内存字节数</td></tr><tr><td>namedprocess_namegroup_open_filedesc</td><td>获取进程使用的文件描述符数量</td></tr><tr><td>namedprocess_namegroup_thread_count</td><td>运行的线程数</td></tr><tr><td>namedprocess_namegroup_thread_cpu_seconds_total</td><td>获取线程 CPU 状态时间</td></tr><tr><td>namedprocess_namegroup_thread_io_bytes_total</td><td>获取线程 IO 字节数</td></tr></tbody></table><h2 id=6-nvidia-gpu-exporter>6. nvidia gpu exporter</h2><p>nvidia gpu exporter 是一个通过 nvidia-smi 获取 GPU 指标的工具</p><p>项目地址 <a href=https://github.com/utkuozdemir/nvidia_gpu_exporter>https://github.com/utkuozdemir/nvidia_gpu_exporter</a> ，面板地址 <a href=https://grafana.com/grafana/dashboards/14574-nvidia-gpu-metrics/>https://grafana.com/grafana/dashboards/14574-nvidia-gpu-metrics/</a></p><h3 id=61-安装方式>6.1 安装方式</h3><ul><li>添加 Helm 镜像仓库</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm repo add utkuozdemir https://utkuozdemir.org/helm-charts
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm repo update
</span></span></code></pre></td></tr></table></div></div><ul><li>安装</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>helm install nvidia-gpu-exporter utkuozdemir/nvidia-gpu-exporter <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>      --namespace monitor --create-namespace <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>      --set nodeSelector.<span class=s2>&#34;accelerator\/provider&#34;</span><span class=o>=</span>nvidia-gpu <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>      --set serviceMonitor.enabled<span class=o>=</span><span class=nb>false</span>
</span></span></code></pre></td></tr></table></div></div><p>需要给 NVIDIA GPU 节点打上标签</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl label node &lt;node-name&gt; accelerator/provider<span class=o>=</span>nvidia-gpu
</span></span></code></pre></td></tr></table></div></div><h3 id=62-指标>6.2 指标</h3><table><thead><tr><th align=left>指标名称</th><th align=left>类型</th><th align=left>单位</th><th align=left>描述</th></tr></thead><tbody><tr><td align=left>nvidia_smi_accounting_buffer_size</td><td align=left>gauge</td><td align=left></td><td align=left>计费缓冲区大小</td></tr><tr><td align=left>nvidia_smi_accounting_mode</td><td align=left>gauge</td><td align=left></td><td align=left>计费模式</td></tr><tr><td align=left>nvidia_smi_clocks_applications_graphics_clock_hz</td><td align=left>gauge</td><td align=left>MHz</td><td align=left>应用程序显卡时钟频率</td></tr><tr><td align=left>nvidia_smi_clocks_applications_memory_clock_hz</td><td align=left>gauge</td><td align=left>MHz</td><td align=left>应用程序内存时钟频率</td></tr><tr><td align=left>nvidia_smi_clocks_current_graphics_clock_hz</td><td align=left>gauge</td><td align=left>MHz</td><td align=left>当前显卡时钟频率</td></tr><tr><td align=left>nvidia_smi_clocks_current_memory_clock_hz</td><td align=left>gauge</td><td align=left>MHz</td><td align=left>当前内存时钟频率</td></tr><tr><td align=left>nvidia_smi_clocks_current_sm_clock_hz</td><td align=left>gauge</td><td align=left>MHz</td><td align=left>当前流处理器时钟频率</td></tr><tr><td align=left>nvidia_smi_clocks_current_video_clock_hz</td><td align=left>gauge</td><td align=left>MHz</td><td align=left>当前视频时钟频率</td></tr><tr><td align=left>nvidia_smi_clocks_default_applications_graphics_clock_hz</td><td align=left>gauge</td><td align=left>MHz</td><td align=left>默认应用程序显卡时钟频率</td></tr><tr><td align=left>nvidia_smi_clocks_default_applications_memory_clock_hz</td><td align=left>gauge</td><td align=left>MHz</td><td align=left>默认应用程序内存时钟频率</td></tr><tr><td align=left>nvidia_smi_clocks_max_graphics_clock_hz</td><td align=left>gauge</td><td align=left>MHz</td><td align=left>最大显卡时钟频率</td></tr><tr><td align=left>nvidia_smi_clocks_max_memory_clock_hz</td><td align=left>gauge</td><td align=left>MHz</td><td align=left>最大内存时钟频率</td></tr><tr><td align=left>nvidia_smi_clocks_max_sm_clock_hz</td><td align=left>gauge</td><td align=left>MHz</td><td align=left>最大流处理器时钟频率</td></tr><tr><td align=left>nvidia_smi_clocks_throttle_reasons_active</td><td align=left>gauge</td><td align=left></td><td align=left>主动限制原因</td></tr><tr><td align=left>nvidia_smi_clocks_throttle_reasons_applications_clocks_setting</td><td align=left>gauge</td><td align=left></td><td align=left>应用程序时钟设置限制原因</td></tr><tr><td align=left>nvidia_smi_clocks_throttle_reasons_gpu_idle</td><td align=left>gauge</td><td align=left></td><td align=left>GPU 空闲限制原因</td></tr><tr><td align=left>nvidia_smi_clocks_throttle_reasons_hw_power_brake_slowdown</td><td align=left>gauge</td><td align=left></td><td align=left>硬件动力制动减速限制原因</td></tr><tr><td align=left>nvidia_smi_clocks_throttle_reasons_hw_slowdown</td><td align=left>gauge</td><td align=left></td><td align=left>硬件减速限制原因</td></tr><tr><td align=left>nvidia_smi_clocks_throttle_reasons_hw_thermal_slowdown</td><td align=left>gauge</td><td align=left></td><td align=left>硬件温控减速限制原因</td></tr><tr><td align=left>nvidia_smi_clocks_throttle_reasons_supported</td><td align=left>gauge</td><td align=left></td><td align=left>支持的限制原因</td></tr><tr><td align=left>nvidia_smi_clocks_throttle_reasons_sw_power_cap</td><td align=left>gauge</td><td align=left></td><td align=left>软件功率上限限制原因</td></tr><tr><td align=left>nvidia_smi_clocks_throttle_reasons_sw_thermal_slowdown</td><td align=left>gauge</td><td align=left></td><td align=left>软件温控减速限制原因</td></tr><tr><td align=left>nvidia_smi_clocks_throttle_reasons_sync_boost</td><td align=left>gauge</td><td align=left></td><td align=left>同步增强限制原因</td></tr><tr><td align=left>nvidia_smi_command_exit_code</td><td align=left>gauge</td><td align=left></td><td align=left>最后一次抓取命令的退出码</td></tr><tr><td align=left>nvidia_smi_compute_cap</td><td align=left>gauge</td><td align=left></td><td align=left>计算能力</td></tr><tr><td align=left>nvidia_smi_compute_mode</td><td align=left>gauge</td><td align=left></td><td align=left>计算模式</td></tr><tr><td align=left>nvidia_smi_count</td><td align=left>gauge</td><td align=left></td><td align=left>数量</td></tr><tr><td align=left>nvidia_smi_display_active</td><td align=left>gauge</td><td align=left></td><td align=left>显示器激活状态</td></tr><tr><td align=left>nvidia_smi_display_mode</td><td align=left>gauge</td><td align=left></td><td align=left>显示器模式</td></tr><tr><td align=left>nvidia_smi_ecc_errors_corrected_aggregate_device_memory</td><td align=left>gauge</td><td align=left></td><td align=left>修正的设备内存 ECC 错误总数</td></tr><tr><td align=left>nvidia_smi_ecc_errors_corrected_aggregate_dram</td><td align=left>gauge</td><td align=left></td><td align=left>修正的 DRAM ECC 错误总数</td></tr><tr><td align=left>nvidia_smi_ecc_errors_corrected_aggregate_total</td><td align=left>gauge</td><td align=left></td><td align=left>修正的 ECC 错误总数</td></tr><tr><td align=left>nvidia_smi_ecc_errors_corrected_volatile_device_memory</td><td align=left>gauge</td><td align=left></td><td align=left>修正的易失性设备内存 ECC 错误数</td></tr><tr><td align=left>nvidia_smi_ecc_errors_corrected_volatile_dram</td><td align=left>gauge</td><td align=left></td><td align=left>修正的易失性 DRAM ECC 错误数</td></tr><tr><td align=left>nvidia_smi_ecc_errors_corrected_volatile_total</td><td align=left>gauge</td><td align=left></td><td align=left>修正的易失性 ECC 错误总数</td></tr><tr><td align=left>nvidia_smi_ecc_errors_uncorrected_aggregate_device_memory</td><td align=left>gauge</td><td align=left></td><td align=left>未修正的设备内存 ECC 错误总数</td></tr><tr><td align=left>nvidia_smi_ecc_errors_uncorrected_aggregate_dram</td><td align=left>gauge</td><td align=left></td><td align=left>未修正的 DRAM ECC 错误总数</td></tr><tr><td align=left>nvidia_smi_ecc_errors_uncorrected_aggregate_total</td><td align=left>gauge</td><td align=left></td><td align=left>未修正的 ECC 错误总数</td></tr><tr><td align=left>nvidia_smi_ecc_errors_uncorrected_volatile_device_memory</td><td align=left>gauge</td><td align=left></td><td align=left>未修正的易失性设备内存 ECC 错误数</td></tr><tr><td align=left>nvidia_smi_ecc_errors_uncorrected_volatile_dram</td><td align=left>gauge</td><td align=left></td><td align=left>未修正的易失性 DRAM ECC 错误数</td></tr><tr><td align=left>nvidia_smi_ecc_errors_uncorrected_volatile_total</td><td align=left>gauge</td><td align=left></td><td align=left>未修正的易失性 ECC 错误总数</td></tr><tr><td align=left>nvidia_smi_ecc_mode_current</td><td align=left>gauge</td><td align=left></td><td align=left>当前 ECC 模式</td></tr><tr><td align=left>nvidia_smi_ecc_mode_pending</td><td align=left>gauge</td><td align=left></td><td align=left>等待生效的 ECC 模式</td></tr><tr><td align=left>nvidia_smi_encoder_stats_average_fps</td><td align=left>gauge</td><td align=left></td><td align=left>编码器平均 FPS</td></tr><tr><td align=left>nvidia_smi_encoder_stats_average_latency</td><td align=left>gauge</td><td align=left></td><td align=left>编码器平均延迟</td></tr><tr><td align=left>nvidia_smi_encoder_stats_session_count</td><td align=left>gauge</td><td align=left></td><td align=left>编码会话数</td></tr><tr><td align=left>nvidia_smi_enforced_power_limit_watts</td><td align=left>gauge</td><td align=left>W</td><td align=left>执行的功率限制</td></tr><tr><td align=left>nvidia_smi_gpu_info</td><td align=left>gauge</td><td align=left></td><td align=left>GPU 信息</td></tr><tr><td align=left>nvidia_smi_index</td><td align=left>gauge</td><td align=left></td><td align=left>索引</td></tr><tr><td align=left>nvidia_smi_inforom_ecc</td><td align=left>gauge</td><td align=left></td><td align=left>ECC 信息 ROM</td></tr><tr><td align=left>nvidia_smi_inforom_oem</td><td align=left>gauge</td><td align=left></td><td align=left>OEM 信息 ROM</td></tr><tr><td align=left>nvidia_smi_memory_free_bytes</td><td align=left>gauge</td><td align=left>MiB</td><td align=left>空闲内存</td></tr><tr><td align=left>nvidia_smi_memory_reserved_bytes</td><td align=left>gauge</td><td align=left>MiB</td><td align=left>保留内存</td></tr><tr><td align=left>nvidia_smi_memory_total_bytes</td><td align=left>gauge</td><td align=left>MiB</td><td align=left>总内存</td></tr><tr><td align=left>nvidia_smi_memory_used_bytes</td><td align=left>gauge</td><td align=left>MiB</td><td align=left>已用内存</td></tr><tr><td align=left>nvidia_smi_name</td><td align=left>gauge</td><td align=left></td><td align=left>名称</td></tr><tr><td align=left>nvidia_smi_pci_bus</td><td align=left>gauge</td><td align=left></td><td align=left>PCI 总线号</td></tr><tr><td align=left>nvidia_smi_pci_device</td><td align=left>gauge</td><td align=left></td><td align=left>PCI 设备号</td></tr><tr><td align=left>nvidia_smi_pci_device_id</td><td align=left>gauge</td><td align=left></td><td align=left>PCI 设备 ID</td></tr><tr><td align=left>nvidia_smi_pci_domain</td><td align=left>gauge</td><td align=left></td><td align=left>PCI 域</td></tr><tr><td align=left>nvidia_smi_pci_sub_device_id</td><td align=left>gauge</td><td align=left></td><td align=left>PCI 子设备 ID</td></tr><tr><td align=left>nvidia_smi_pcie_link_gen_current</td><td align=left>gauge</td><td align=left></td><td align=left>当前 PCIe 链路生成</td></tr><tr><td align=left>nvidia_smi_pcie_link_gen_gpucurrent</td><td align=left>gauge</td><td align=left></td><td align=left>GPU 当前 PCIe 链路生成</td></tr><tr><td align=left>nvidia_smi_pcie_link_gen_gpumax</td><td align=left>gauge</td><td align=left></td><td align=left>GPU 最大 PCIe 链路生成</td></tr><tr><td align=left>nvidia_smi_pcie_link_gen_hostmax</td><td align=left>gauge</td><td align=left></td><td align=left>主机最大 PCIe 链路生成</td></tr><tr><td align=left>nvidia_smi_pcie_link_gen_max</td><td align=left>gauge</td><td align=left></td><td align=left>最大 PCIe 链路生成</td></tr><tr><td align=left>nvidia_smi_pcie_link_width_current</td><td align=left>gauge</td><td align=left></td><td align=left>当前 PCIe 链路带宽</td></tr><tr><td align=left>nvidia_smi_pcie_link_width_max</td><td align=left>gauge</td><td align=left></td><td></td></tr></tbody></table><h2 id=7-juicefs-exporter>7. juicefs-exporter</h2><p>在主机上挂载 JuiceFS 文件系统时，默认在 9567 端口就有 Metrics 数据。</p><p>面板地址 <a href=https://github.com/juicedata/juicefs/blob/be5b6935975ea665c37f9cf5f5827e6f9474e28f/docs/en/grafana_template.json>https://github.com/juicedata/juicefs/blob/be5b6935975ea665c37f9cf5f5827e6f9474e28f/docs/en/grafana_template.json</a></p><h3 id=71-安装方式>7.1 安装方式</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl apply -f https://raw.githubusercontent.com/shaowenchen/hubimage/main/observation/host-9567-expoorter.yaml
</span></span></code></pre></td></tr></table></div></div><h3 id=72-指标>7.2 指标</h3><ul><li>文件系统</li></ul><table><thead><tr><th>指标名称</th><th>描述</th><th>单位</th></tr></thead><tbody><tr><td><code>juicefs_used_space</code></td><td>总使用空间</td><td>字节</td></tr><tr><td><code>juicefs_used_inodes</code></td><td>总 inodes 数量</td><td></td></tr></tbody></table><ul><li>操作系统</li></ul><table><thead><tr><th>指标名称</th><th>描述</th><th>单位</th></tr></thead><tbody><tr><td><code>juicefs_uptime</code></td><td>总运行时间</td><td>秒</td></tr><tr><td><code>juicefs_cpu_usage</code></td><td>CPU 使用量</td><td>秒</td></tr><tr><td><code>juicefs_memory</code></td><td>内存使用量</td><td>字节</td></tr></tbody></table><ul><li>元数据引擎</li></ul><table><thead><tr><th>指标名称</th><th>描述</th><th>单位</th></tr></thead><tbody><tr><td><code>juicefs_transaction_durations_histogram_seconds</code></td><td>事务的延时分布</td><td>秒</td></tr><tr><td><code>juicefs_transaction_restart</code></td><td>事务重启的次数</td><td></td></tr></tbody></table><ul><li>FUSE</li></ul><table><thead><tr><th>指标名称</th><th>描述</th><th>单位</th></tr></thead><tbody><tr><td><code>juicefs_fuse_read_size_bytes</code></td><td>读请求的大小分布</td><td>字节</td></tr><tr><td><code>juicefs_fuse_written_size_bytes</code></td><td>写请求的大小分布</td><td>字节</td></tr><tr><td><code>juicefs_fuse_ops_durations_histogram_seconds</code></td><td>所有请求的延时分布</td><td>秒</td></tr><tr><td><code>juicefs_fuse_open_handlers</code></td><td>打开的文件和目录数量</td><td></td></tr></tbody></table><ul><li>SDK</li></ul><table><thead><tr><th>指标名称</th><th>描述</th><th>单位</th></tr></thead><tbody><tr><td><code>juicefs_sdk_read_size_bytes</code></td><td>读请求的大小分布</td><td>字节</td></tr><tr><td><code>juicefs_sdk_written_size_bytes</code></td><td>写请求的大小分布</td><td>字节</td></tr><tr><td><code>juicefs_sdk_ops_durations_histogram_seconds</code></td><td>所有请求的延时分布</td><td>秒</td></tr></tbody></table><ul><li>缓存</li></ul><table><thead><tr><th>指标名称</th><th>描述</th><th>单位</th></tr></thead><tbody><tr><td><code>juicefs_blockcache_blocks</code></td><td>缓存块的总个数</td><td></td></tr><tr><td><code>juicefs_blockcache_bytes</code></td><td>缓存块的总大小</td><td>字节</td></tr><tr><td><code>juicefs_blockcache_hits</code></td><td>命中缓存块的总次数</td><td></td></tr><tr><td><code>juicefs_blockcache_miss</code></td><td>没有命中缓存块的总次数</td><td></td></tr><tr><td><code>juicefs_blockcache_writes</code></td><td>写入缓存块的总次数</td><td></td></tr><tr><td><code>juicefs_blockcache_drops</code></td><td>丢弃缓存块的总次数</td><td></td></tr><tr><td><code>juicefs_blockcache_evicts</code></td><td>淘汰缓存块的总次数</td><td></td></tr><tr><td><code>juicefs_blockcache_hit_bytes</code></td><td>命中缓存块的总大小</td><td>字节</td></tr><tr><td><code>juicefs_blockcache_miss_bytes</code></td><td>没有命中缓存块的总大小</td><td>字节</td></tr><tr><td><code>juicefs_blockcache_write_bytes</code></td><td>写入缓存块的总大小</td><td>字节</td></tr><tr><td><code>juicefs_blockcache_read_hist_seconds</code></td><td>读缓存块的延时分布</td><td>秒</td></tr><tr><td><code>juicefs_blockcache_write_hist_seconds</code></td><td>写缓存块的延时分布</td><td>秒</td></tr><tr><td><code>juicefs_staging_blocks</code></td><td>暂存路径中的块数</td><td></td></tr><tr><td><code>juicefs_staging_block_bytes</code></td><td>暂存路径中块的总字节数</td><td>秒</td></tr><tr><td><code>juicefs_staging_block_delay_seconds</code></td><td>暂存块延迟的总秒数</td><td>秒</td></tr></tbody></table><ul><li>对象存储</li></ul><table><thead><tr><th>指标名称</th><th>描述</th><th>单位</th></tr></thead><tbody><tr><td><code>juicefs_object_request_durations_histogram_seconds</code></td><td>请求对象存储的延时分布</td><td>秒</td></tr><tr><td><code>juicefs_object_request_errors</code></td><td>请求失败的总次数</td><td></td></tr><tr><td><code>juicefs_object_request_data_bytes</code></td><td>请求对象存储的总数据大小</td><td>字节</td></tr></tbody></table><ul><li>内部特性</li></ul><table><thead><tr><th>指标名称</th><th>描述</th><th>单位</th></tr></thead><tbody><tr><td><code>juicefs_compact_size_histogram_bytes</code></td><td>合并数据的大小分布</td><td>字节</td></tr><tr><td><code>juicefs_used_read_buffer_size_bytes</code></td><td>当前用于读取的缓冲区的大小</td><td></td></tr></tbody></table><ul><li>数据同步</li></ul><table><thead><tr><th>指标名称</th><th>描述</th><th>单位</th></tr></thead><tbody><tr><td><code>juicefs_sync_scanned</code></td><td>从源端扫描的所有对象数量</td><td></td></tr><tr><td><code>juicefs_sync_handled</code></td><td>已经处理过的来自源端的对象数量</td><td></td></tr><tr><td><code>juicefs_sync_pending</code></td><td>等待同步的对象数量</td><td></td></tr><tr><td><code>juicefs_sync_copied</code></td><td>已经同步过的对象数量</td><td></td></tr><tr><td><code>juicefs_sync_copied_bytes</code></td><td>已经同步过的数据总大小</td><td>字节</td></tr><tr><td><code>juicefs_sync_skipped</code></td><td>同步时被跳过的对象数量</td><td></td></tr><tr><td><code>juicefs_sync_failed</code></td><td>同步时失败的对象数量</td><td></td></tr><tr><td><code>juicefs_sync_deleted</code></td><td>同步时被删除的对象数量</td><td></td></tr><tr><td><code>juicefs_sync_checked</code></td><td>同步时校验过 checksum 的对象数量</td><td></td></tr><tr><td><code>juicefs_sync_checked_bytes</code></td><td>同步时校验过 checksum 的数据总大小</td><td>字节</td></tr></tbody></table><h2 id=8-kube-state-metrics>8. kube-state-metrics</h2><p>kube-state-metrics 通过监听 Kubernetes API 服务器来生成不同资源的状态的 Metrics 数据。</p><p>项目地址 <a href=https://github.com/kubernetes/kube-state-metrics>https://github.com/kubernetes/kube-state-metrics</a> ，监控面板 <a href=https://grafana.com/grafana/dashboards/13332-kube-state-metrics-v2/>https://grafana.com/grafana/dashboards/13332-kube-state-metrics-v2/</a> 。</p><h3 id=81-安装方式>8.1 安装方式</h3><blockquote><p>一般安装 Prometheus Server 时，默认已经安装 kube-state-metrics，无需再次安装。</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl apply -f https://raw.githubusercontent.com/shaowenchen/hubimage/main/observation/v2.10.0-kube-state-metrics.yaml
</span></span></code></pre></td></tr></table></div></div><h3 id=82-指标>8.2 指标</h3><ul><li>Node</li></ul><table><thead><tr><th>指标名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>kube_node_info</td><td>Gauge</td><td>查询集群内所有的节点信息,可以通过 sum() 函数获得集群中的所有节点数目。</td></tr><tr><td>kube_node_spec_unschedulable</td><td>Gauge</td><td>查询节点是否可以被调度新的 Pod。可以通过 sum() 函数获得集群中可以调度的 Pod 总数。</td></tr><tr><td>kube_node_status_allocatable</td><td>Gauge</td><td>查询节点可用于调度的资源总数。包括:CPU、内存、Pods 等。允许通过标签筛选,查看节点具体的资源容量。</td></tr><tr><td>kube_node_status_capacity</td><td>Gauge</td><td>查询节点的全部资源总数,包括:CPU、内存、Pods 等。允许通过标签筛选,查看节点具体的资源容量。</td></tr><tr><td>kube_node_status_condition</td><td>Gauge</td><td>查询节点的状态,可以基于 OutOfDisk、MemoryPressure、DiskPressure 等状态找到状态不正常的节点。</td></tr></tbody></table><ul><li>Pod</li></ul><table><thead><tr><th>指标名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>kube_pod_info</td><td>Gauge</td><td>查询所有的 Pod 信息,可以通过 sum() 函数获得集群中的所有 Pod 数目。</td></tr><tr><td>kube_pod_status_phase</td><td>Gauge</td><td>查询所有的 Pod 启动状态。状态包括:<br>_ True:启动成功。<br>_ Failed:启动失败。<br>* Unknown:状态未知。</td></tr><tr><td>kube_pod_status_ready</td><td>Gauge</td><td>查询所有处于 Ready 状态的 Pod。可以通过 sum() 函数获得集群中的所有 Pod 数目。</td></tr><tr><td>kube_pod_status_scheduled</td><td>Gauge</td><td>查询所有处于 scheduled 状态的 Pod。可以通过 sum() 函数获得集群中的所有 Pod 数目。</td></tr></tbody></table><ul><li>Container</li></ul><table><thead><tr><th>指标名称</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>kube_pod_container_info</td><td>Gauge</td><td>查询所有 Container 的信息。可以通过 sum() 函数获得集群中的所有 Container 数目。</td></tr><tr><td>kube_pod_container_status_ready</td><td>Gauge</td><td>查询所有状态为 Ready 的 Container 信息。可以通过 sum() 函数获得集群中的所有 Container 数目。</td></tr><tr><td>kube_pod_container_status_restarts_total</td><td>Count</td><td>查询集群中所有 Container 的重启累计次数。可以通过 irate() 函数获得集群中 Container 的重启率。</td></tr><tr><td>kube_pod_container_status_running</td><td>Gauge</td><td>查询所有状态为 Running 的 Container 信息。可以通过 sum() 函数获得集群中的所有 Container 数目。</td></tr><tr><td>kube_pod_container_status_terminated</td><td>Gauge</td><td>查询所有状态为 Terminated 的 Container 信息。可以通过 sum() 函数获得集群中的所有 Container 数目。</td></tr><tr><td>kube_pod_container_status_waiting</td><td>Gauge</td><td>查询所有状态为 Waiting 的 Container 信息。可以通过 sum() 函数获得集群中的所有 Container 数目。</td></tr><tr><td>kube_pod_container_resource_requests</td><td>Gauge</td><td>查询容器的资源需求量。允许通过标签筛选,查看容器具体的资源需求量。</td></tr><tr><td>kube_pod_container_resource_limits</td><td>Gauge</td><td>查询容器的资源限制量。允许通过标签筛选,查看容器具体的资源限制量。</td></tr></tbody></table></article><script defer src=/js/clipboard.min.1626706afc88d95ebe1173b553ec732c6dc82a576989315fdf5e7779af738a44.js></script>
<script defer src=/js/helper/prev.min.js></script>
<script defer src=/js/helper/prop.min.js></script>
<script>"use strict";document.addEventListener("DOMContentLoaded",function(){var e=!1,t=document.querySelectorAll("pre.chroma"),n=document.querySelectorAll(".language-code"),s=document.querySelectorAll("div.language-\\$"),o=document.querySelectorAll("div.language-\\>"),i=function(t){var s,o,i,a,r,c,l,d=t,n=t.textContent;if(n.length>15){e||(a=new ClipboardJS(".copy-to-clipboard",{text:function(e){var t=prev(e).querySelectorAll("code");return t.length>1?n=prev(e).querySelector('code[class^="language-"]').textContent:n=prev(e).querySelector("code").textContent,n.replace(/^\$\s/gm,"")}}),a.on("success",function(e){e.clearSelection(),l=prop(e.trigger.parentNode,"tagName")=="PRE",e.trigger.setAttribute("aria-label","Copied to clipboard!"),e.trigger.classList.add("tooltipped"),e.trigger.classList.add("tooltipped-w")}),a.on("error",function(e){l=prop(e.trigger.parentNode,"tagName")=="PRE",e.trigger.setAttribute("aria-label",e.action.toString()),e.trigger.classList.add("tooltipped"),e.trigger.classList.add("tooltipped-w")}),e=!0),r=["language-mermaid","language-viz","language-wave","language-chart","language-msc","language-flowchart"],c=!1,s=d.getAttribute("class");for(o=0;o<r.length;o++)if(s&&s.startsWith(r[o])){c=!0;break}c||s&&(i=document.createElement("span"),i.setAttribute("class","copy-to-clipboard"),i.setAttribute("title","Copy to clipboard"),t.parentNode.parentNode.insertBefore(i,t.parentNode.nextElementSibling))}},a=function(e){var t=document.createElement("span");t.setAttribute("class","copy-to-clipboard"),t.setAttribute("title","Copy to clipboard"),e.parentNode.parentNode.insertBefore(t,e.parentNode.nextElementSibling)};t?t.forEach(function(e){e.querySelectorAll("code").forEach(function(e){i(e)})}):null,n?n.forEach(function(e){e.querySelectorAll("code").forEach(function(e){i(e)})}):null,s?s.forEach(function(e){e.querySelectorAll("code").forEach(function(e){a(e)})}):null,o?o.forEach(function(e){e.querySelectorAll("code").forEach(function(e){a(e)})}):null})</script><script>"use strict";function wrap(e,t){e.parentNode.insertBefore(t,e),t.appendChild(e)}(function(){var e=document.querySelector(".single__contents");e?e.querySelectorAll("pre > code").forEach(function(e){var t=e.getAttribute("data-lang"),n=document.createElement("div"),o=null,s=null;t&&t.includes(":")?(o=t.split(":")[0],s=t.split(":")[1],n.className="language-"+o,n.setAttribute("data-lang",s),e.className="language-"+o,e.setAttribute("data-lang",s),e.setAttribute("id",s)):t||(n.setAttribute("data-lang","Code"),n.className="language-code"),(!t||s)&&wrap(e.parentNode,n)}):null})();var langCodeElem=document.querySelectorAll(".language-code"),dollarCodeElem,gtCodeElem;langCodeElem?langCodeElem.forEach(function(e){var t=document.createElement("span");t.className="copy-to-clipboard",t.setAttribute("title","Copy to clipboard"),e.append(t)}):null,dollarCodeElem=document.querySelectorAll("div.language-\\$"),gtCodeElem=document.querySelectorAll("div.language-\\>"),dollarCodeElem?dollarCodeElem.forEach(function(e){var t=e.parentNode.parentNode?e.parentNode.parentNode.querySelectorAll(".lnt"):null;t?t.forEach(function(e){e.innerHTML="$<br/>"}):null}):null,gtCodeElem?gtCodeElem.forEach(function(e){var t=e.parentNode.parentNode?e.parentNode.parentNode.querySelectorAll(".lnt"):null;t?t.forEach(function(e){e.innerHTML="><br/>"}):null}):null</script><div class=whoami__gutter></div><hr class="hr-slash whoami-hr"><section class=whoami><div class=whoami__image-wrapper><img data-src=/static/images/chenshaowen.jpg src="data:image/svg+xml,%0A%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='none' d='M0 0h24v24H0V0z'/%3E%3Cpath fill='%23aaa' d='M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 16H6c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h12c.55 0 1 .45 1 1v12c0 .55-.45 1-1 1zm-4.44-6.19l-2.35 3.02-1.56-1.88c-.2-.25-.58-.24-.78.01l-1.74 2.23c-.26.33-.02.81.39.81h8.98c.41 0 .65-.47.4-.8l-2.55-3.39c-.19-.26-.59-.26-.79 0z'/%3E%3C/svg%3E" alt=微信公众号 class="lazyload whoami__image"></div><div class=whoami__contents><div class=whoami__written-by>作者</div><div class=whoami__title>微信公众号</div><div class=whoami__desc></div><div class=whoami__social></div></div></section><hr class="hr-slash whoami-hr"><section class=related><h1 class=related__title><hr class=hr-dots><div>相关内容</div><hr class=hr-dots></h1><ul class=related-ul><li><a href=/blog/how-to-collect-labels-and-annotations-of-kubernetes-objects.html class=related__link>如何采集 Kubernetes 对象的 labels 和 annotations</a></li><li><a href=/blog/how-to-insight-the-pipeline-of-tekton.html class=related__link>如何查看 Tekton 的流水线指标</a></li><li><a href=/blog/using-triton-server-and-tensorrt-llm-under-container.html class=related__link>容器下使用 Triton Server 和 TensorRT-LLM 进行大模型推理</a></li><li><a href=/blog/basic-usage-of-nvidia-smi.html class=related__link>nvidia-smi 基本使用</a></li><li><a href=/blog/managing-data-in-kubernetes-using-fluid-and-juicefs.html class=related__link>使用 Fluid 和 JuiceFS 在 Kubernetes 管理数据</a></li></ul></section><div class=grow></div><nav class=pagination-single><a href=https://www.chenshaowen.com/blog/using-triton-server-and-tensorrt-llm-under-container.html class=pagination-single__left><div class=pagination-single__icon><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentcolor" d="M19 11H7.83l4.88-4.88c.39-.39.39-1.03.0-1.42s-1.02-.39-1.41.0l-6.59 6.59c-.39.39-.39 1.02.0 1.41l6.59 6.59c.39.39 1.02.39 1.41.0s.39-1.02.0-1.41L7.83 13H19c.55.0 1-.45 1-1s-.45-1-1-1z"/></svg></div><div class=pagination-single__left-title>容器下使用 Triton Server 和 TensorRT-LLM 进行大模型推理</div></a><div class=grow></div><a href=https://www.chenshaowen.com/blog/practice-guide-to-kind.html class=pagination-single__right><div class=pagination-single__right-title>kind 实用指南</div><div class=pagination-single__icon><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentcolor" d="M5 13h11.17l-4.88 4.88c-.39.39-.39 1.03.0 1.42.39.39 1.02.39 1.41.0l6.59-6.59c.39-.39.39-1.02.0-1.41l-6.58-6.6c-.39-.39-1.02-.39-1.41.0s-.39 1.02.0 1.41L16.17 11H5c-.55.0-1 .45-1 1s.45 1 1 1z"/></svg></div></a></nav><div class="modal micromodal-slide" id=modal aria-hidden=true><div class=modal__overlay tabindex=-1 data-micromodal-close><div class=modal__container role=dialog aria-modal=true aria-labelledby=modal-title><div class=modal__content id=modal-content><div id=mySwipe class=swipe><div class=swipe-wrap></div></div></div><span class=modal__items><span class=modal__header><div class=modal__paging title="Page Info" aria-label="Current Page"></div><div class="modal__icon modal__toolbar modal__toolbar--close" title=Close aria-label="Close Button" data-micromodal-close><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="25" height="25"><path fill="currentcolor" d="M21.734375 19.640625l-2.097656 2.09375C19.253906 22.121094 18.628906 22.121094 18.242188 21.734375L13 16.496094 7.761719 21.734375C7.375 22.121094 6.746094 22.121094 6.363281 21.734375l-2.097656-2.09375c-.386719-.386718999999999-.386719-1.011719.0-1.398437L9.503906 13 4.265625 7.761719c-.382812-.390625-.382812-1.019531.0-1.398438L6.363281 4.265625C6.746094 3.878906 7.375 3.878906 7.761719 4.265625L13 9.507813l5.242188-5.242188c.386718000000002-.386719 1.015625-.386719 1.394531.0l2.097656 2.09375C22.121094 6.746094 22.121094 7.375 21.738281 7.761719L16.496094 13l5.238281 5.242188C22.121094 18.628906 22.121094 19.253906 21.734375 19.640625z"/></svg></div><div class="modal__icon modal__toolbar modal__toolbar--full" title="Full Screen" aria-label="Full Screen Button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="25" height="25"><path fill="currentcolor" d="M5 3C3.9069372 3 3 3.9069372 3 5V8A1.0001 1.0001.0 105 8V5H8A1.0001 1.0001.0 108 3H5zM16 3a1.0001 1.0001.0 100 2h3V8a1.0001 1.0001.0 102 0V5C21 3.9069372 20.093063 3 19 3H16zM3.984375 14.986328A1.0001 1.0001.0 003 16v3c0 1.093063.9069372 2 2 2H8a1.0001 1.0001.0 100-2H5V16A1.0001 1.0001.0 003.984375 14.986328zm16 0A1.0001 1.0001.0 0019 16v3H16a1.0001 1.0001.0 100 2h3C20.093063 21 21 20.093063 21 19V16a1.0001 1.0001.0 00-1.015625-1.013672z"/></svg></div><div class="modal__icon modal__toolbar modal__toolbar--normal" title="Normal Screen" aria-label="Normal Screen Button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="25" height="25"><path fill="currentcolor" d="M16.96875 4.972656C15.867188 4.988281 14.984375 5.894531 15 7v8H7C6.277344 14.988281 5.609375 15.367188 5.246094 15.992188 4.878906 16.613281 4.878906 17.386719 5.246094 18.007813 5.609375 18.632813 6.277344 19.011719 7 19H19V7C19.007813 6.460938 18.796875 5.941406 18.414063 5.558594 18.03125 5.175781 17.511719 4.964844 16.96875 4.972656zm16 0c-1.046875.015625-1.90625.839844-1.964844 1.886719C31 6.90625 31 6.953125 31 7V19H43C43.066406 19 43.132813 19 43.199219 18.992188 44.269531 18.894531 45.070313 17.972656 45.015625 16.902344 44.964844 15.828125 44.074219 14.988281 43 15H35V7C35.007813 6.460938 34.796875 5.941406 34.414063 5.558594 34.03125 5.175781 33.511719 4.964844 32.96875 4.972656zM7 31C6.277344 30.988281 5.609375 31.367188 5.246094 31.992188 4.878906 32.613281 4.878906 33.386719 5.246094 34.007813 5.609375 34.632813 6.277344 35.011719 7 35h8v8C14.988281 43.722656 15.367188 44.390625 15.992188 44.753906 16.613281 45.121094 17.386719 45.121094 18.007813 44.753906 18.632813 44.390625 19.011719 43.722656 19 43V31zm24 0V43C30.988281 43.722656 31.367188 44.390625 31.992188 44.753906 32.613281 45.121094 33.386719 45.121094 34.007813 44.753906 34.632813 44.390625 35.011719 43.722656 35 43V35h8C43.722656 35.011719 44.390625 34.632813 44.753906 34.007813 45.121094 33.386719 45.121094 32.613281 44.753906 31.992188 44.390625 31.367188 43.722656 30.988281 43 31z"/></svg></div></span><div class="modal__icon modal__arrow modal__arrow--left" title="Arrow Left" aria-label="Arrow Left Button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="28" height="28"><path fill="currentcolor" d="M23.28125 11 10 10V6.851563C10 6.523438 9.839844 6.277344 9.519531 6.03125 9.199219 5.949219 8.878906 5.949219 8.640625 6.113281c-3.28125 2.296875-6.402344 6.144532-6.480469 6.308594-.078125.15625-.152343.390625-.15625.554688000000001C2.003906 12.980469 2 12.988281 2 12.992188 2 13.15625 2.078125 13.402344 2.160156 13.484375 2.238281 13.648438 5.28125 17.507813 8.640625 19.804688 8.960938 19.96875 9.28125 20.050781 9.519531 19.886719 9.839844 19.722656 10 19.476563 10 19.148438V16l13.28125-1C23.679688 14.679688 24 13.875 24 12.992188 24 12.195313 23.761719 11.320313 23.28125 11z"/></svg></div><div class="modal__icon modal__arrow modal__arrow--right" title="Arrow Right" aria-label="Arrow Right Button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="28" height="28"><path fill="currentcolor" d="M2.71875 11.023438l13.28125-1V6.875C16 6.546875 16.160156 6.300781 16.480469 6.054688 16.800781 5.972656 17.121094 5.972656 17.359375 6.136719c3.28125 2.296875 6.402344 6.144531 6.480469 6.308594.078125.15625.152343999999999.390625.15625.554687C23.996094 13.003906 24 13.011719 24 13.015625 24 13.179688 23.921875 13.425781 23.839844 13.507813 23.761719 13.671875 20.71875 17.53125 17.359375 19.828125 17.039063 19.992188 16.71875 20.074219 16.480469 19.910156 16.160156 19.746094 16 19.5 16 19.171875V16.023438L2.71875 15.023438C2.320313 14.703125 2 13.898438 2 13.015625c0-.796875.238281-1.671875.71875-1.992187z"/></svg></div><div class=modal__caption><div class=modal__caption--text></div></div></span></div></div></div><script defer src=/js/swipe.min.feb438efb7ca009ecd7fc2ac3ad2fced4840990b2798d81f87137f2dc6281f05.js></script>
<script defer src=/js/micromodal.min.de01b44b2f383056bbcaf6ee921fd385d79108ec1129afd0eb2f3f5a07e11f45.js></script>
<script defer src=/js/helper/fadeinout.min.js></script>
<script>document.addEventListener("DOMContentLoaded",function(){var e,t,n,o,i,a,r,c,l,d,u,h,f,p,g,v,b,s=document.documentElement;function j(){s.requestFullscreen?s.requestFullscreen():s.mozRequestFullScreen?s.mozRequestFullScreen():s.webkitRequestFullscreen?s.webkitRequestFullscreen():s.msRequestFullscreen&&s.msRequestFullscreen()}function m(){(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen())}c=document.getElementById("modal"),i=document.querySelector(".gallery__container"),v=document.querySelector(".swipe-wrap"),b=document.getElementById("mySwipe"),u=document.querySelector(".modal__arrow--left"),f=document.querySelector(".modal__arrow--right"),h=document.querySelector(".modal__toolbar--close"),t=document.querySelector(".modal__toolbar--full"),n=document.querySelector(".modal__toolbar--normal"),r=document.querySelector(".modal__caption"),d=document.querySelector(".modal__paging"),o=document.querySelector(".modal__items"),a=null,l=null,e=null,p=function(t){t.key==="ArrowRight"?c&&c.classList.contains("is-open")&&e.next():t.key==="ArrowLeft"&&c&&c.classList.contains("is-open")&&e.prev()},i?a=i.querySelectorAll("img").length:(i=document.querySelector(".single__contents"),a=i.querySelectorAll("img").length),MicroModal.init({onClose:function(){e&&(e.kill(),e=null,m()),window.removeEventListener("keydown",p)},disableScroll:!0,disableFocus:!0,awaitOpenAnimation:!1,awaitCloseAnimation:!1,debugMode:!1}),g=function(e){return new Promise(function(t,n){var s=new Image;s.onload=function(){t(s)},s.onerror=n,s.src=e})},i.querySelectorAll("img").forEach(function(s,i){s.style.cursor="pointer";var c,u=s.cloneNode(!0);u.style.maxHeight="100%",u.style.maxWidth="100%",u.onclick=function(e){e.stopPropagation()},c=document.createElement("div"),c.style.width="100%",c.style.height="100vh",c.setAttribute("data-micromodal-close",""),c.onclick=function(){e&&(e.kill(),e=null)},c.onmouseenter=function(){clearTimeout(l),fadeIn(o,200)},c.onmouseleave=function(){l=setTimeout(function(){fadeOut(o,200)},2500)},c.ontouchstart=function(){fadeIn(o,200)},c.append(u),v.append(c),s.addEventListener("click",async function(s){MicroModal.show("modal"),e&&(e.kill(),e=null);var c,m=s.target.getAttribute("data-src")||s.target.getAttribute("src"),h=await g(m);u.style.width=h.width+"px",u.style.height=h.height+"px",e=new Swipe(b,{startSlide:i,draggable:!0,autoRestart:!1,continuous:!1,disableScroll:!0,stopPropagation:!0,callback:async function(e,t){var s,n=t.querySelector("img"),c=n.getAttribute("data-src")||n.getAttribute("src"),i=await g(c);n.style.width=i.width+"px",n.style.height=i.height+"px",r&&n&&(s=null,n.getAttribute("data-caption")?s=n.getAttribute("data-caption"):n.getAttribute("title")?s=n.getAttribute("title"):n.getAttribute("alt")?s=n.getAttribute("alt"):s=n.getAttribute("src"),r.querySelector(".modal__caption--text").innerText=s,d.innerText=e+1+" / "+a,clearTimeout(l),fadeIn(o,200))}}),fadeIn(o),r&&(c=null,s.target.getAttribute("data-caption")?c=s.target.getAttribute("data-caption"):s.target.getAttribute("title")?c=s.target.getAttribute("title"):s.target.getAttribute("alt")?c=s.target.getAttribute("alt"):c=s.target.getAttribute("src"),r.querySelector(".modal__caption--text").innerText=c,d.innerText=i+1+" / "+a),n&&t&&(n.style.zIndex=-1,n.style.opacity=0,t.style.zIndex=25,t.style.opacity=1)}),window.addEventListener("keydown",p)}),u?u.addEventListener("click",function(){e&&e.prev()}):null,f?f.addEventListener("click",function(){e&&e.next()}):null,h?h.addEventListener("click",function(){e&&(e.kill(),e=null),m(),MicroModal.close("modal")}):null,t?t.addEventListener("click",function(){j(),n&&(n.style.zIndex=25,n.style.opacity=1,t.style.zIndex=-1,t.style.opacity=0)}):null,n?n.addEventListener("click",function(){m(),t&&(t.style.zIndex=25,t.style.opacity=1,n.style.zIndex=-1,n.style.opacity=0)}):null})</script><div class=hide><div class=search><span class=icon><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentcolor" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49.0s.41-1.08.0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg></span><input id=search aria-label="Site Search" class=input type=text placeholder=搜索 autocomplete=off><div id=search-results class=dropdown><div id=search-menu class=dropdown-menu role=menu></div></div></div></div></div></main><aside class="single__side main-side"><section class="sidebar hide"><script>document.querySelector(".sidebar").classList.remove("hide")</script><div class=toc__flexbox data-position=fixed><h6 class=toc__title data-ani=true>目录</h6><label class=switch data-ani=true><input id=toggle-toc aria-label="Toggle TOC" type=checkbox checked>
<span class="slider round"></span></label></div><div class=toc data-dir=ltr data-folding=true data-ani=true><nav id=TableOfContents><ul><li><a href=#1-dcgm-exporter>1. dcgm-exporter</a><ul><li><a href=#11-安装方式>1.1 安装方式</a></li><li><a href=#12-指标>1.2 指标</a></li></ul></li><li><a href=#2-npu-exporter>2. npu-exporter</a><ul><li><a href=#21-安装方式>2.1 安装方式</a></li><li><a href=#22-指标>2.2 指标</a></li></ul></li><li><a href=#3-node-exporter>3. node-exporter</a><ul><li><a href=#31-安装方式>3.1 安装方式</a></li><li><a href=#32-指标>3.2 指标</a></li></ul></li><li><a href=#4-node-problem-detector>4 node-problem-detector</a><ul><li><a href=#41-安装方式>4.1 安装方式</a></li><li><a href=#42-指标>4.2 指标</a></li></ul></li><li><a href=#5-process-exporter>5. process-exporter</a><ul><li><a href=#51-安装方式>5.1 安装方式</a></li><li><a href=#52-指标>5.2 指标</a></li></ul></li><li><a href=#6-nvidia-gpu-exporter>6. nvidia gpu exporter</a><ul><li><a href=#61-安装方式>6.1 安装方式</a></li><li><a href=#62-指标>6.2 指标</a></li></ul></li><li><a href=#7-juicefs-exporter>7. juicefs-exporter</a><ul><li><a href=#71-安装方式>7.1 安装方式</a></li><li><a href=#72-指标>7.2 指标</a></li></ul></li><li><a href=#8-kube-state-metrics>8. kube-state-metrics</a><ul><li><a href=#81-安装方式>8.1 安装方式</a></li><li><a href=#82-指标>8.2 指标</a></li></ul></li></ul></nav></div></section></aside><script>var enableToc=JSON.parse("true"),toc=JSON.parse("null"),tocPosition=JSON.parse('"inner"'),singleMainElem=document.querySelector(".single__main"),singleSideElem=document.querySelector(".single__side");enquire.register("screen and (max-width: 769px)",{match:function(){(enableToc||toc)&&tocPosition!=="outer"?singleMainElem&&singleSideElem&&(singleMainElem.classList.remove("main-main"),singleMainElem.classList.add("main"),singleSideElem.classList.remove("main-side"),singleSideElem.classList.add("hide")):tocPosition==="outer"&&(singleMainElem&&!singleMainElem.classList.contains("main-main")&&(singleMainElem.classList.remove("main-main"),singleMainElem.classList.add("main")),singleSideElem&&!singleSideElem.classList.contains("hide")&&singleSideElem.classList.add("hide"))},unmatch:function(){(enableToc||toc)&&tocPosition!=="outer"?(singleMainElem.classList.remove("main"),singleMainElem.classList.add("main-main"),singleSideElem.classList.remove("hide"),singleSideElem.classList.add("main-side")):tocPosition==="outer"&&(singleMainElem&&!singleMainElem.classList.contains("main-main")&&(singleMainElem.classList.remove("main-main"),singleMainElem.classList.add("main")),singleSideElem&&!singleSideElem.classList.contains("hide")&&singleSideElem.classList.add("hide"));var t=document.querySelector(".navbar__burger"),e=document.getElementsByClassName("navbarm__collapse")[0];e&&(e.setAttribute("data-open",!1),e.style.maxHeight=0,t.classList.remove("is-active")),document.getElementsByClassName("navbar__menu")[0].classList.remove("is-active"),document.getElementsByClassName("mobile-search")[0].classList.add("hide")},setup:function(){},deferSetup:!0,destroy:function(){}})</script><script defer src=/js/helper/getParents.min.js></script>
<script defer src=/js/helper/closest.min.js></script>
<script defer src=/js/helper/prev.min.js></script>
<script defer src=/js/helper/prop.min.js></script>
<script defer src=/js/helper/fadeinout.min.js></script>
<script defer src=/js/helper/throttle.min.js></script>
<script>"use strict";window.onload=function(){var e,t,n,s,o,i,r,c,l,d,u,h,m,f,p,g,v,b,j,y,_,w,O,x,C,E,k,A,S,M,F,T,z,D,N,H,a=document.querySelector(".navbar"),P=document.querySelector(".single__contents"),R=JSON.parse("false"),L=JSON.parse("true");R&&L&&(y=document.querySelector("#busuanzi_value_page_pv"),y.textContent=y.textContent.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")),S=JSON.parse("true"),z=JSON.parse("null"),D=JSON.parse("false"),d=document.querySelector(".toc__flexbox"),u=document.querySelector(".toc__flexbox--outer"),x=JSON.parse("true"),(S||z)&&document.querySelector(".toc")&&(i=document.querySelector(".toc").querySelector("#TableOfContents"),i.onmouseenter=function(){a.classList.contains("scrolling")&&a.classList.remove("scrolling")},i.onmouseleave=function(){a.classList.contains("scrolling")||a.classList.add("scrolling")},!1===x||(i.querySelectorAll("ul")?i.querySelectorAll("ul").forEach(function(e){e.querySelectorAll("li").forEach(function(e){e.querySelectorAll("ul").forEach(function(e){e.style.display="none"})})}):null),i&&(i.querySelectorAll("a").length>0?i.querySelectorAll("a").forEach(function(e){e.addEventListener("click",function(){var t,n=e.getAttribute("id");a.classList.contains("scrolling")||(a.classList.remove("navbar--show"),a.classList.remove("navbar--hide"),a.classList.add("navbar--hide")),document.querySelector(".toc").querySelectorAll("a").forEach(function(e){e.classList.remove("active")}),e.classList.add("active"),t=i.querySelector('[href="#'+n+'"]'),t&&t.nextElementSibling&&(t.nextElementSibling.style.display="block"),t&&(getParents(t,"ul")?getParents(t,"ul").forEach(function(e){e.style.display="block"}):null)})}):(d&&(d.setAttribute("data-position",""),d.classList.contains("hide")||d.classList.add("hide")),u&&(u.setAttribute("data-position",""),u.classList.contains("hide")||u.classList.add("hide")))),b=document.getElementById("toggle-toc"),v=document.getElementById("visible-toc"),s=document.querySelector(".toc"),o=document.querySelector("main"),l=document.querySelector("side"),c=document.querySelector(".toc__flexbox"),b?b.addEventListener("change",function(e){e.target.checked?(s&&fadeIn(s,200),c&&c.setAttribute("data-position","fixed"),o&&(o.classList.remove("main-main"),o.classList.remove("main"),o.classList.add("main-main")),l&&l.classList.remove("main-side")):(s&&fadeOut(s,200),c&&c.setAttribute("data-position","absolute"),o&&(o.classList.remove("main-main"),o.classList.remove("main"),o.classList.add("main")),l&&l.classList.remove("main-side"))}):null,v?v.addEventListener("change",function(e){e.target.checked?s&&fadeIn(s,200):s&&fadeOut(s,200)}):null),C=120,M=70,A=function(){s&&(s.style.maxHeight=window.innerHeight-C-M+"px")},w=throttle(A,300),w(),window.addEventListener("resize",w),E=new ClipboardJS(".anchor"),j=P.querySelectorAll("h1, h2, h3, h4"),F=JSON.parse('"ltr"'),j?j.forEach(function(e){var t,s=parseInt(e.tagName.substr(1),10)*2,o=encodeURI(document.location.origin+document.location.pathname),i=o+"#"+e.getAttribute("id"),n=document.createElement("span");n.classList.add("anchor"),n.classList.add("hide"),n.setAttribute("data-clipboard-text",decodeURI(i)),n.style.position="relative",t=document.createElement("span"),t.style.position="absolute",t.style.top="50%",t.style.left="0.75rem",t.style.transform="translateY(-50%)",t.innerHTML=`
<svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="${32-s}px" height="${32-s}px"><path d="M 5.5625 0 C 4.136719 0 2.707031 0.542969 1.625 1.625 C -0.539063 3.789063 -0.539063 7.335938 1.625 9.5 L 5.28125 13.15625 C 5.667969 13.554688 6.304688 13.558594 6.703125 13.171875 C 7.101563 12.785156 7.105469 12.148438 6.71875 11.75 L 3.03125 8.0625 C 1.632813 6.664063 1.632813 4.429688 3.03125 3.03125 C 4.429688 1.632813 6.664063 1.632813 8.0625 3.03125 L 12.96875 7.9375 C 14.367188 9.335938 14.367188 11.570313 12.96875 12.96875 C 12.804688 13.132813 12.621094 13.25 12.4375 13.375 C 11.980469 13.6875 11.859375 14.308594 12.171875 14.765625 C 12.484375 15.222656 13.105469 15.34375 13.5625 15.03125 C 13.847656 14.835938 14.125 14.625 14.375 14.375 C 16.539063 12.210938 16.539063 8.664063 14.375 6.5 L 9.5 1.625 C 8.417969 0.542969 6.988281 0 5.5625 0 Z M 10.78125 8.875 C 10.738281 8.882813 10.695313 8.894531 10.65625 8.90625 C 10.507813 8.9375 10.371094 9 10.25 9.09375 C 10.039063 9.253906 9.820313 9.429688 9.625 9.625 C 7.460938 11.789063 7.460938 15.335938 9.625 17.5 L 14.5 22.375 C 16.664063 24.539063 20.210938 24.539063 22.375 22.375 C 24.539063 20.210938 24.539063 16.664063 22.375 14.5 L 18.71875 10.875 C 18.476563 10.578125 18.089844 10.441406 17.714844 10.527344 C 17.34375 10.613281 17.050781 10.90625 16.964844 11.277344 C 16.878906 11.652344 17.015625 12.039063 17.3125 12.28125 L 20.96875 15.9375 C 22.367188 17.335938 22.367188 19.570313 20.96875 20.96875 C 19.570313 22.367188 17.335938 22.367188 15.9375 20.96875 L 11.03125 16.0625 C 9.632813 14.664063 9.632813 12.429688 11.03125 11.03125 C 11.152344 10.90625 11.300781 10.820313 11.4375 10.71875 C 11.839844 10.472656 12.015625 9.976563 11.855469 9.53125 C 11.699219 9.085938 11.25 8.8125 10.78125 8.875 Z"/></svg>`,F==="rtl"?t.style.left="-2rem":t.style.right="-2rem",n.append(t),e.append(n),e.addEventListener("mouseenter",function(){this.querySelector(".anchor").classList.remove("hide")}),e.addEventListener("mouseleave",function(){this.querySelector(".anchor").classList.add("hide")})}):null,document.querySelectorAll(".anchor").forEach(function(e){e.addEventListener("mouseleave",function(){e.setAttribute("aria-label",null),e.classList.remove("tooltipped"),e.classList.remove("tooltipped-s"),e.classList.remove("tooltipped-w")})}),E.on("success",function(e){e.clearSelection(),e.trigger.setAttribute("aria-label","Link copied to clipboard!"),e.trigger.classList.add("tooltipped"),e.trigger.classList.add("tooltipped-s")}),t=JSON.parse("null"),t&&t.includes("mermaid")&&(O=localStorage.getItem("theme")||JSON.parse('"light"'),O==="dark"||O==="hacker"?mermaid.initialize({theme:"dark"}):mermaid.initialize({theme:"default"}),_=[],[].push.apply(_,document.getElementsByClassName("language-mermaid")),_.forEach(function(e){var n,t=e.parentNode;t!==document.body&&(t.parentNode.insertBefore(e,t),t.parentNode.removeChild(t)),n=document.createElement("div"),n.classList.add("mermaid"),n.style.padding="34px 4px 6px",n.innerHTML=e.innerHTML,e.replaceWith(n)})),t&&t.includes("katex")&&(N=document.getElementsByClassName("math"),r={delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1}]},renderMathInElement(document.querySelector(".single__contents"),r)),t&&t.includes("flowchartjs")&&(r=JSON.parse('{"arrow-end":"block","element-color":"black","fill":"white","flowstate":{"approved":{"fill":"#58C4A3","font-size":12,"no-text":"n/a","yes-text":"APPROVED"},"current":{"fill":"yellow","font-color":"red","font-weight":"bold"},"future":{"fill":"#FFFF99"},"invalid":{"fill":"#444444"},"past":{"fill":"#CCCCCC","font-size":12},"rejected":{"fill":"#C45879","font-size":12,"no-text":"REJECTED","yes-text":"n/a"},"request":{"fill":"blue"}},"font-color":"black","font-size":14,"line-color":"black","line-length":50,"line-width":3,"no-text":"no","scale":1,"symbols":{"end":{"class":"end-element"},"start":{"element-color":"green","fill":"yellow","font-color":"red"}},"text-margin":10,"x":0,"y":0,"yes-text":"yes"}'),n=null,T="language-flowchart",e=0,Array.prototype.forEach.call(document.querySelectorAll("[class^="+T+"]"),function(t){t.style.display="none",t.parentNode.style.backgroundColor="transparent",n=t.innerText;var o,s=document.createElement("div");s.id="flowchart"+e,t.parentNode.insertBefore(s,t),o=flowchart.parse(n),o.drawSVG("flowchart"+e,r),e+=1})),document.querySelectorAll("mjx-container").forEach(function(e){e.parentElement.classList+="has-jax"}),t&&t.includes("msc")&&(r=JSON.parse('{"theme":"hand"}'),n=null,e=0,h="language-msc",Array.prototype.forEach.call(document.querySelectorAll("[class^="+h+"]"),function(t){t.style.display="none",t.parentNode.style.backgroundColor="transparent",n=t.innerText;var o,s=document.createElement("div");s.id="msc"+e,t.parentNode.insertBefore(s,t),o=Diagram.parse(n),o.drawSVG("msc"+e,r),e+=1})),t&&t.includes("chart")&&(m="#666",f="#ddd",p=2,Chart.defaults.global.elements.rectangle.borderWidth=p,Chart.defaults.global.elements.rectangle.borderColor=m,Chart.defaults.global.elements.rectangle.backgroundColor=f,Chart.defaults.global.elements.line.borderWidth=p,Chart.defaults.global.elements.line.borderColor=m,Chart.defaults.global.elements.line.backgroundColor=f,Chart.defaults.global.elements.point.borderWidth=p,Chart.defaults.global.elements.point.borderColor=m,Chart.defaults.global.elements.point.backgroundColor=f,h="language-chart",e=0,n=null,Array.prototype.forEach.call(document.querySelectorAll("[class^="+h+"]"),function(t){t.style.display="none",t.parentNode.style.backgroundColor="transparent",n=t.innerText;var i,a,s=document.createElement("canvas"),o=null;s.height=200,s.style.height=200,s.id="myChart"+e,o=JSON.parse(n),t.parentNode.insertBefore(s,t),i=document.getElementById("myChart"+e).getContext("2d"),a=new Chart(i,o),e+=1})),t&&t.includes("wavedrom")&&(k="language-wave",e=0,n=null,Array.prototype.forEach.call(document.querySelectorAll("[class^="+k+"]"),function(t){t.style.display="none",t.parentNode.style.backgroundColor="transparent",n=t.innerText;var s=document.createElement("div"),o=null;s.id="WaveDrom_Display_"+e,o=JSON.parse(n),t.parentNode.insertBefore(s,t),WaveDrom.RenderWaveForm(e,o,"WaveDrom_Display_"),e+=1})),t&&t.includes("viz")&&(g="language-viz-",Array.prototype.forEach.call(document.querySelectorAll("[class^="+g+"]"),function(e){e.style.display="none",e.parentNode.style.backgroundColor="transparent",e.getAttribute("class").split(" ").forEach(function(e){e.startsWith(g)&&(t=e.substr(g.length))});var t,n=new Viz;n.renderSVGElement(e.innerText,{engine:t}).then(function(t){t.style.width="100%",e.parentNode.insertBefore(t,e)})}))}</script><footer class=footer><div id=gtt><div class=gtt><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentcolor" d="M8.12 14.71 12 10.83l3.88 3.88c.39.39 1.02.39 1.41.0s.39-1.02.0-1.41L12.7 8.71c-.39-.39-1.02-.39-1.41.0L6.7 13.3c-.39.39-.39 1.02.0 1.41.39.38 1.03.39 1.42.0z"/></svg></div></div><hr><div class="basicflex flexwrap"><a href=https://beian.miit.gov.cn/ class=footer__link target=_blank rel=noreferrer>鄂ICP备15009848号-4</a></div><div class=footer__poweredby><p class=caption>©2016 - 2025, All Rights Reserved.</p></div></footer></div><div class="wrapper__right hide" data-pad=true dir=ltr><script>document.querySelector(".wrapper__right").classList.remove("hide")</script></div></div></body></html>